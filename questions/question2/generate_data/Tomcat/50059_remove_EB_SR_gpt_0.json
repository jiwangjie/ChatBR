{
  "id": "50059",
  "title": "Bug 50059 - Resources not served from /WEBINF/lib/{.jar}/METAINF/resources if metadatacomplete=\"true\" is set in web.xml",
  "description": "When metadatacomplete=\"true\" is set in the /WEBINF/web.xml of a Servlet 3.0 webapp (let's name it foo), resources are not served from /WEBINF/lib/{.jar}/METAINF/resources as expected.",
  "OB": "When starting the web app in Tomcat 7.0.2 and accessing http://localhost:8080/foo/index.html in a web browser, the observed behavior is a 404 response. The expected behavior is a 200 response with index.html being served. If you modify the web.xml to set metadatacomplete=\"false\" and restart the app, /foo/index.html responds as expected. It's worth noting that I also tested the same webapp with Glassfish v3.0.1, and it works as expected regardless of the value set in the metadatacomplete attribute. Upon reviewing the Servlet 3.0 specification, it appears that metadatacomplete is supposed to regulate annotation and web fragment processing. However, in this case, the behavior seems to be affected even when dealing with resources in bar.jar, which has nothing to do with annotations and is not a web fragment.",
  "EB": "When metadatacomplete=\"true\" is set in the web.xml, the expected behavior is that resources, such as /WEBINF/lib/{.jar}/METAINF/resources, should be served successfully when accessing http://localhost:8080/foo/index.html, resulting in a 200 response.",
  "SR": "To reproduce this issue, follow these steps:\n1. Create a Servlet 3.0 webapp named 'foo'.\n2. In the /WEBINF/web.xml of the 'foo' webapp, set metadatacomplete=\"true\" on the webapp element.\n3. Start the web app in Tomcat 7.0.2.\n4. Open a web browser and go to http://localhost:8080/foo/index.html.\n5. Observe the actual result, which should be a 404 response.\n6. To confirm the bug, modify the web.xml to set metadatacomplete=\"false\" and restart the application.\n7. Access http://localhost:8080/foo/index.html again, and this time it should respond as expected with a 200 response."
}