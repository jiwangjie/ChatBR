{"id": "78021", "title": "Bug 78021Injecting exception into while loop with break statement causes catch block to be ignored", "description": " In order to test exception scenarios in an existing framework, I havecreated an aspect to inject an exception.The exception is injected intosome code running within a try/catch/finally block.After the exception isthrown, I am expecting control to pass to the catch block.However, whatis happening is that the catch block code is not executed, control passesthrough the finally block and the (undeclared) exception is thrown to thecalling method.Here is a distilled test case:public class MainClass {protected Integer counter;private int j;public static void main(String[] args) {MainClass mh = new MainClass();try {mh.doSomething();} catch (Exception e) {System.out.println(\"Exception thrown bydoSomething!!!!! \");e.printStackTrace();}}public void doSomething() {int i = 0;while (i++ < 1) {counter=null;try {counter = getCounter();if (counter == null) {break;}commit();} catch (Throwable e) {System.out.println(\"Caught exception \" +e);} finally {System.out.println(\"In finally block\");}}}protected Integer getCounter() {return new Integer(j++);}protected void commit() throws SQLException {System.out.println(\"Main.commit\");}}The following aspect injects the exception:public aspect SimpleExceptionThrowingAspect {pointcut commitOperation() : call ( MainClass+.commit(..));before() throws SQLException : commitOperation() {throw new SQLException(\"Dummy SQL Exception\", \"55102\");}}Expected output is:Caught exception java.sql.SQLException: Dummy SQL ExceptionIn finally blockActual output is:In finally blockException thrown by doSomething!!!! !java.sql.SQLException: Dummy SQL Exceptionatnz.govt.moh.test.SimpleExceptionThrowingAspect.ajc$before$nzgovtmohtestSimpleExceptionThrowingAspect$1$292c82f1(SimpleExceptionThrowingAspect.aj:10)at nz.govt.moh.test.MainClass.doSomething(MainClass.java:32)at nz.govt.moh.test.MainClass.main(MainClass.java:14)Removing the \"break;\" statement from MainClass.java causes the expectedoutput to be produced.", "OB": " Bug 78021Injecting exception into while loop with break statement causes catch block to be ignored", "EB": "", "SR": ""}