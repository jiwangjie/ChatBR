{"id": "109124", "title": "Bug 109124VerifyError with inner classes", "description": " Bug 109124VerifyError with inner classes );before(Object t) : setField(t) {System.out.println(\"WRITE\");// Do something with t...}}//////////////////////////////////////////////////////////////////////// List@Node.jadpackage test;// Referenced classes of package test://List, ListAspectclass List$Node{int value;List$Node next;final List this$0;List$Node(int v){//00:aload0List list1 = List.this;//11:aload1//22:astore3List$Node list$node = this;//33:astore4ListAspect.aspectOf().ajc$before$testListAspect$1$3f3247a5(list$node);//45:invokestatic37<Method test.ListAspecttest.ListAspect.aspectOf()//58:aload4//610:invokevirtual41<Method voidtest.ListAspect.ajc$before$testListAspect$1$3f3247a5(java.lang.Object)list$node.this$0 = list1;//713:aload4//815:aload3//916:putfield16<Field test.List test.List$Node.this$0super();//1019:aload0//1120:invokespecial19<Method void Object()//1223:aload0int i = v;//1324:iload2//1425:istore5List$Node list$node1 = this;//1527:astore6ListAspect.aspectOf().ajc$before$testListAspect$1$3f3247a5(list$node1);//1629:invokestatic37<Method test.ListAspecttest.ListAspect.aspectOf()//1732:aload6//1834:invokevirtual41<Method voidtest.ListAspect.ajc$before$testListAspect$1$3f3247a5(java.lang.Object)list$node1.value = i;//1937:aload6//2039:iload5//2141:putfield21<Field int test.List$Node.value//2244:return}}", "OB": " This bug apparently occurs only when compiling with the 1.5 option (AdrianColyer managed to reproduce it).Considering the code below, when I set a 'set' pointcut on the fields of innerclass Node, I get an error from the class verifier:Exception in thread \"main\" java.lang.VerifyError: (class: test/List$Node,method: <init signature: (Ltest/List;I)V) Expecting to find object/array on stackWhen the Node class is moved out of the List class, it works fine.", "EB": "", "SR": " This bug apparently occurs only when compiling with the 1.5 option (AdrianColyer managed to reproduce it).Considering the code below, when I set a 'set' pointcut on the fields of innerclass Node, I get an error from the class verifier:Exception in thread \"main\" java.lang.VerifyError: (class: test/List$Node,method: <init signature: (Ltest/List;I)V) Expecting to find object/array on stackWhen the Node class is moved out of the List class, it works fine. Thedecompiled code for the inner class is included below for reference.//////////////////////////////////////////////////////////////////////// List.javapackage test;public class List {class Node {int value;Node next;Node(int v){value = v;}}private Node head;public List(){head = null;}public void add(int v){Node n = new Node(v);n.next = head;head = n;}public void print(){Node n = head;while (n != null) {System.out.print(\" \" + n.value);n = n.next;}System.out.println();}public static void main(String[] args) {List l = new List();for (int i = 0; i < 10; i++)l.add(i);l.print();}}//////////////////////////////////////////////////////////////////////// ListAspect.ajpackage test;public aspect ListAspect {pointcut setField(Object t) : target(t) && set( List.Node+."}