{"id": "279120", "title": "Bug 279120NPE determining annotation target kind during weaving", "description": " Bug 279120NPE determining annotation target kind during weaving reported on the list:Hi,I am using aspectj LTW (aspectjweaver1.6.1) for weaving an aspect available in another jar within my web application code.While building the jar which contains the aspect, using maven, I have JUnits which run without any problems using LTW.My aspect code looks as below@Around(\"execution (@com.arisglobal.aglite.annotations.OperationTrail public(..)) && this(executor)\")public Object auditOperation(ProceedingJoinPoint thisJoinPoint,Object executor) {\u2026\u2026 aspect code\u2026}However when I deploy the application in tomcat (with javaagent:aspectjweaver1.6.1.jar option), I get a NPE which I have pasted below.Jun 4, 2009 12:06:18 PM org.aspectj.weaver.tools.Jdk14Trace errorSEVERE: com/arisglobal/aglite/services/actiontrail/ActionTrailAspectjava.lang.NullPointerExceptionat org.aspectj.weaver.bcel.BcelObjectType.getAnnotationTargetKinds(BcelObjectType.java:612)at org.aspectj.weaver.ReferenceType.getAnnotationTargetKinds(ReferenceType.java:265)at org.aspectj.weaver.patterns.SignaturePattern.checkForIncorrectTargetKind(SignaturePattern.java:112)at org.aspectj.weaver.patterns.SignaturePattern.checkForIncorrectTargetKind(SignaturePattern.java:94)at org.aspectj.weaver.patterns.SignaturePattern.resolveBindings(SignaturePattern.java:87)at org.aspectj.weaver.patterns.KindedPointcut.resolveBindings(KindedPointcut.java:262)at org.aspectj.weaver.patterns.AndPointcut.resolveBindings(AndPointcut.java:75)at org.aspectj.weaver.patterns.Pointcut.resolve(Pointcut.java:196)at org.aspectj.weaver.bcel.AtAjAttributes.handleAroundAnnotation(AtAjAttributes.java:1308)at org.aspectj.weaver.bcel.AtAjAttributes.readAj5MethodAttributes(AtAjAttributes.java:403)at org.aspectj.weaver.bcel.BcelMethod.unpackAjAttributes(BcelMethod.java:189)at org.aspectj.weaver.bcel.BcelMethod.<init(BcelMethod.java:96)at org.aspectj.weaver.bcel.BcelObjectType.getDeclaredMethods(BcelObjectType.java:264)at org.aspectj.weaver.bcel.LazyClassGen.<init(LazyClassGen.java:303)at org.aspectj.weaver.bcel.BcelObjectType.getLazyClassGen(BcelObjectType.java:524)at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1728)at org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump(BcelWeaver.java:1696)at org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify(BcelWeaver.java:1458)at org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1244)at org.aspectj.weaver.tools.WeavingAdaptor.getWovenBytes(WeavingAdaptor.java:423)at org.aspectj.weaver.tools.WeavingAdaptor.weaveClass(WeavingAdaptor.java:286)at org.aspectj.weaver.loadtime.Aj.preProcess(Aj.java:95)at org.aspectj.weaver.loadtime.ClassPreProcessorAgentAdapter.transform(ClassPreProcessorAgentAdapter.java:52)at sun.instrument.TransformerManager.transform(TransformerManager.java:122)at sun.instrument.InstrumentationImpl.transform(InstrumentationImpl.java:155)at java.lang.ClassLoader.defineClass1(Native Method)at java.lang.ClassLoader.defineClass(ClassLoader.java:620)I also tried using aspectjweaver1.6.4 version however got the same error.", "OB": "", "EB": "", "SR": ""}