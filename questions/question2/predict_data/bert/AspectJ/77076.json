{"id": "77076", "title": "Bug 77076Weaving into jar fails if some of the referred classes are unavailable", "description": " I am trying to profile JDBC access in a Springbased application.Since all the JDBC interaction is performed through Spring classes,I need to weave into spring.jar. However, many of the classesreferred by spring.jar aren't available to me (I am not usingthe functionality implemented by many of the classes). For example, spring.jarrefers to Velocity, Struts, JDO, Hibernate, Quartz classes;I am unlikely to use all of these referred frameworks in anapplication. && within(org.spring..) {}}Weaving this aspect with spring.jar should result in logicallyidentical jar file.", "OB": " Bug 77076Weaving into jar fails if some of the referred classes are unavailable When Itry to weave into spring.jar I get errors complaining that itcan't find types for those classes.I expected that ajc would ignore unknown classes unless weavingwould be affected by content/API of those classes.Using jar files that refer to foreign classes that one maynever have/need is a common scenario. However, when I compile using the followingcommand (or equivalent ant task), I get the following errors:C:\\work\\aop\\bugs\\injarwithnonexistingclassesajc versionAspectJ Compiler 1.2.1rc1 built on Friday Oct 22, 2004 at 13:31:47 GMTC:\\work\\aop\\bugs\\injarwithnonexistingclassesajc injars spring.jar outjar springwoven.jar NoWeaveAspect.javaC:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.quartz.xml.JobSchedulingDataProcessor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.quartz.StatefulJob(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.quartz.SimpleTrigger(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type freemarker.cache.TemplateLoader(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.quartz.CronTrigger(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.quartz.JobDetail(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.quartz.Job(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.quartz.impl.jdbcjobstore.JobStoreCMT(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.struts.action.PlugIn(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.velocity.tools.generic.NumberTool(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.struts.action.Action(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.struts.tiles.TilesRequestProcessor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.struts.action.RequestProcessor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.velocity.runtime.resource.loader.ResourceLoader(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.velocity.runtime.log.LogSystem(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type javax.faces.el.VariableResolver(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.velocity.tools.generic.DateTool(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.commons.attributes.AttributeRepositoryClass(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.cglib.proxy.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.commons.pool.PoolableObjectFactory(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.cglib.proxy.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.cglib.proxy.Dispatcher(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInvocation(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.cglib.proxy.CallbackFilter(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.cglib.proxy.NoOp(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.hibernate.transaction.TransactionManagerLookup(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.hibernate.connection.ConnectionProvider(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.hibernate.UserType(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.ojb.broker.accesslayer.ConnectionFactoryManagedImpl(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.cglib.proxy.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.cglib.proxy.CallbackFilter(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)41 errors", "EB": "", "SR": " This bug/limitation prevents using AspectJ withsuch jars.To reproduce the bug in a controlled environment, I createdthe following aspect which should make the weaving processa passthru filter (no join point is matched by the pointcut)class TemporaryClass {}public aspect NoWeaveAspect {before() : call( TemporaryClass.(..)) However, when I compile using the followingcommand (or equivalent ant task), I get the following errors:C:\\work\\aop\\bugs\\injarwithnonexistingclassesajc versionAspectJ Compiler 1.2.1rc1 built on Friday Oct 22, 2004 at 13:31:47 GMTC:\\work\\aop\\bugs\\injarwithnonexistingclassesajc injars spring.jar outjar springwoven.jar NoWeaveAspect.javaC:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.quartz.xml.JobSchedulingDataProcessor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.quartz.StatefulJob(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.quartz.SimpleTrigger(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type freemarker.cache.TemplateLoader(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.quartz.CronTrigger(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.quartz.JobDetail(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.quartz.Job(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.quartz.impl.jdbcjobstore.JobStoreCMT(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.struts.action.PlugIn(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.velocity.tools.generic.NumberTool(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.struts.action.Action(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.struts.tiles.TilesRequestProcessor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.struts.action.RequestProcessor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.velocity.runtime.resource.loader.ResourceLoader(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.velocity.runtime.log.LogSystem(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type javax.faces.el.VariableResolver(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.velocity.tools.generic.DateTool(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.commons.attributes.AttributeRepositoryClass(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.cglib.proxy.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.commons.pool.PoolableObjectFactory(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.cglib.proxy.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.cglib.proxy.Dispatcher(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInvocation(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.cglib.proxy.CallbackFilter(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.cglib.proxy.NoOp(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.hibernate.transaction.TransactionManagerLookup(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.hibernate.connection.ConnectionProvider(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.hibernate.UserType(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.apache.ojb.broker.accesslayer.ConnectionFactoryManagedImpl(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.cglib.proxy.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type net.sf.cglib.proxy.CallbackFilter(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)C:\\work\\aop\\bugs\\injarwithnonexistingclasses\\spring.jar [error] can't find type org.aopalliance.intercept.MethodInterceptor(no source information available)41 errors"}