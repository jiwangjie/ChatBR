{"id": "37782", "title": "Bug 37782Shell setMinimized(true) doesn't deactivate Shell", "description": " Bug 37782Shell setMinimized(true) doesn't deactivate Shell Specifically, callingsetMinimized doesn't cause the shell to become deactivated.The following code snipped illustrates the problem:public static void main(String[] args){final Display display = new Display();final Shell shell = new Shell(display, SWT.SHELLTRIM);shell.setLayout(new FillLayout(SWT.HORIZONTAL));final Button current = new Button(shell, SWT.PUSH);current.setText(\"Minimize (Current)\");final Button proposed = new Button(shell, SWT.PUSH);proposed.setText(\"Minimize (Proposed)\");Listener l = new Listener(){public void handleEvent(Event e){System.out.print(\"Minimize \");if(e.widget == current){System.out.println(\" (Current)\");shell.setMinimized(true);}else if (e.widget == proposed){System.out.println(\" (Proposed)\");OS.SendMessage(shell.handle, OS.WMSYSCOMMAND, OS.SCMINIMIZE, 0);}System.out.println(\"Active Shell: \" + display.getActiveShell());}};current.addListener(SWT.Selection, l);proposed.addListener(SWT.Selection, l);shell.addListener(SWT.Deactivate, new Listener(){public void handleEvent(Event e){System.out.println(\"Shell Deactivated\");}});shell.pack();shell.open();while (!shell.isDisposed ()) {if (!display.readAndDispatch ()) display.sleep ();}display.dispose (); }Clicking the \"Minimize (Current)\" button causes the shell to be minimizedbut it remains active. Hence, the above issues areresolved.My proposal is that the setMinimized method in Decorations be changedfrom:public void setMinimized (boolean minimized) {checkWidget ();if (OS.IsWinCE) return;swFlags = OS.SWRESTORE;if (minimized) swFlags = OS.SWSHOWMINNOACTIVE;if (!OS.IsWindowVisible (handle)) return;if (minimized == OS.IsIconic (handle)) return;OS.ShowWindow (handle, swFlags);OS.UpdateWindow (handle);}topublic void setMinimized (boolean minimized) {checkWidget ();if (OS.IsWinCE) return;swFlags = OS.SWRESTORE;if (minimized) swFlags = OS.SWSHOWMINNOACTIVE;if (!OS.IsWindowVisible (handle)) return;if (minimized == OS.IsIconic (handle)) return;int flag = (minimized) ? OS.SCMINIMIZE : OS.SCRESTORE;OS.SendMessage(handle, OS.WMSYSCOMMAND, flag, 0);}", "OB": " Calling setMinimized(true) on a shell doesn't behave in the same way asclicking on the minimize button of the title bar. Hence, no deactivate event is fired (but one is firewhen you click on the shell in the taskbar to restore it! ), and theapplication under the shell (if there is one) doesn't become active.Clicking on the \"Minimize (Proposed)\" button minimizes the shell anddoes cause it to be become deactivated.", "EB": "", "SR": ""}