{"id": "47343", "title": "Bug 47343Fails redeploying, when we update context.xml.", "description": " Bug 47343Fails redeploying, when we update context.xml. (The context name is assumed to be testWebapp. )1.<<Tomcathome/webapps/testWebapp/METAINF/context.xml is prepared.2.Context.xml is not put under the conf/<engine/<host directory. (means first deployed)3.Tomcat is started. )4.testWebapp.xml of conf/<engine/<hostis updated.Result.<<Tomcathome/webapps/testWebapp directory is deleted.The cause is in the fixed of \"http://svn.apache.org/viewvc?view=rev&revision=712464\".The order of the resource added to HostConfig$DeployedApplicationredeployResources was changed by this fix.order of the redploy resources is as follows. [before fix] Case of Deploy war.warcontext.xml(conf/<engine/<host)doceBase directory Case of Deploy directory.doceBase directorycontext.xml(METAINF/context.xml)[after fix] Case of Deploy war.context.xml(conf/<engine/<host)wardoceBase directory Case of Deploy directory.context.xml(METAINF/context.xml)doceBase directoryHostConfigcheckResources is as follows.for (int i = 0; i < resources.length; i++) {...omitsif ((!resource.isDirectory()) && resource.lastModified()lastModified) {...omits// Delete other redeploy resourcesfor (int j = i + 1; j < resources.length; j++) {try {File current = new File(resources[j]);...omitsExpandWar.delete(current);}} catch (IOException e) {log.warn(sm.getString(\"hostConfig.canonicalizing\", app.name), e);}}...omitsAfter all,When testWebapp.xml of conf/<engine/<hostis updated,directory is deleted or war and the directory are deleted.As a result,It fails in deploying because it tries to deploy it only with context.xml (docBase direcotry doesn't exist).Regards.", "OB": " When context.xml of the conf/<engine/<hostdirectory is updated, docBase directory is deleted and fails redeploying.Reproduction. (testWebapp.xml is created to the conf/<engine/<host directory.", "EB": "", "SR": ""}