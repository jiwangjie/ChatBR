{"id": "42497", "title": "Bug 42497304 response should consistently include ETag header", "description": "", "OB": " Tomcat does not do this for static filesif you request astatic file and get a 200 response, the response has an ETag header; but if youget a 304 resopnse, the ETag is omitted.To reproduce: In a browser, request a static file from Tomcat (e.g. http://localhost/tomcat.gif) Make sure you get a 200 response (force reload or clear browser cache) Examine the response headers (using a browser plugin or whatever)note thatthere is an ETag header Request the same file again, getting a 304 (notmodified) response from Tomcat Examine the response headersnote there is no ETagThe 304 response should include an ETag header, because the 200 response had one.Spec reference: RFC 2616 section 10.3.5 says:\"304 Not Modified[...]The response MUST include the following header fields:[...] ETag and/or ContentLocation, if the header would have been sentin a 200 response to the same request\"", "EB": " Bug 42497304 response should consistently include ETag header According to the HTTP spec, if a server includes an ETag header when it sends afile, it must also include the ETag when it sends a 304 (notmodified) responsefor that file. http://localhost/tomcat.gif) Make sure you get a 200 response (force reload or clear browser cache) Examine the response headers (using a browser plugin or whatever)note thatthere is an ETag header Request the same file again, getting a 304 (notmodified) response from Tomcat Examine the response headersnote there is no ETagThe 304 response should include an ETag header, because the 200 response had one.Spec reference: RFC 2616 section 10.3.5 says:\"304 Not Modified[...]The response MUST include the following header fields:[...] ETag and/or ContentLocation, if the header would have been sentin a 200 response to the same request\"", "SR": " Tomcat does not do this for static filesif you request astatic file and get a 200 response, the response has an ETag header; but if youget a 304 resopnse, the ETag is omitted.To reproduce: In a browser, request a static file from Tomcat (e.g. http://localhost/tomcat.gif) Make sure you get a 200 response (force reload or clear browser cache) Examine the response headers (using a browser plugin or whatever)note thatthere is an ETag header Request the same file again, getting a 304 (notmodified) response from Tomcat Examine the response headersnote there is no ETagThe 304 response should include an ETag header, because the 200 response had one.Spec reference: RFC 2616 section 10.3.5 says:\"304 Not Modified[...]The response MUST include the following header fields:[...] ETag and/or ContentLocation, if the header would have been sentin a 200 response to the same request\""}