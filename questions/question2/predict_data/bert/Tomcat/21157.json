{"id": "21157", "title": "Bug 21157CookieExample is setting cookie after writing data", "description": " Bug 21157CookieExample is setting cookie after writing data That data is still held in buffer and not yet sent overthe wire. Hence the headers are not yet committed. So it is pure luck thatthis example works.You can easily expose the bug by writing say 20K characters in this examplebefore response.addCookie is called. You will see that the cookies that areadding to response are not actually sent back to client.Fix is simple. Move up the response.addCookie() before response.getWriter()", "OB": " A servlet can not set the headers and cookies after writing data to theservlet's output stream. Once the servlet writes data, headers are committed.However CookieExample writes some data first before doing addCookie on theresponse.The reason why this code works at all even with the above bug is: TheCookieExample is only writing a small amount of data before doingresponse.addCookie.", "EB": "", "SR": ""}