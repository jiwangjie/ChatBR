{"id": "25060", "title": "Bug 25060Reloading context orphans currently open jndi datasource connections", "description": " I fiddled around with this a while and have determined to the best of my abilitythat this is a real bug.I have a jndi datasource connected to a postgresqlserver.I have two jndi resources (a reader and writer) so that later I canimplement a system with replication etc and deal with writes and reads todifferent connections.To summarize, after using the system, there are twoconnections to postgres that get reusedone reader and writer.Under load,this number increases and will slowly go back down.I usually end up with twoidle connections (one reader and one writer) left under no load.If you reloadthe context where the datasource is at (it's a context specific datasource), thenumber of connections will jump by two when used.Each reload produces 2 moreconnections min until I restart the server.It appears that after a reload, the'persisted connections' get abandoned / orphaned.Eventually, I hit my maxconnections and cannot aquire any more and the system fails.I have tried theabandond collection parameters and have added debug logging to my code to ensurethat I am indeed calling close on the connections I checkout, even on exceptionsand error cases.Under normal useage without reloads, no connection leakagehappens.This is on a solaris 8 machine with the 4.1.27hotfix22096.tar.gz applied.Letme know if more information is required.I have this in a developmentenvironment and can let somone attach in jdb and hammer on the thing since it'snot a production systemif that will help in getting a repro.Wayne", "OB": " Bug 25060Reloading context orphans currently open jndi datasource connections", "EB": "", "SR": ""}