{"id": "29186", "title": "Bug 29186ajc emacssym chokes on pointcut that includes an intertype method", "description": "Bug 29186ajc emacssym chokes on pointcut that includes an intertype method ", "OB": "This works fine without emacssym, but dies with it:aspect Foo {before() : call(void foo()) { }void Bar.bar() { foo(); }}class Bar {void foo() { }}munger: (before: (persingleton(Foo) && call(ExactTypePattern(void) foo()))void Foo.ajc$before$Foo$f()) on methodcall(void Bar.foo())trouble in:public class Foo extends java.lang.Object:TypeMungers: [(BcelTypeMunger ResolvedTypeMunger(Method, void Bar.bar()))]public static final Foo ajc$perSingletonInstancestatic void <clinit():INVOKESTATIC Foo.ajc$clinit ()V(line 1)staticinitialization(void Foo.<clinit())|RETURNstaticinitialization(void Foo.<clinit())end static void <clinit()void <init():ALOAD0// Foo this(line 1)INVOKESPECIAL java.lang.Object.<init ()Vconstructorexecution(void Foo.<init())|RETURNconstructorexecution(void Foo.<init())end void <init()public void ajc$before$Foo$f()AdviceAttribute(before, call(ExactTypePattern(void) foo()), 0, 15):adviceexecution(void Foo.ajc$before$Foo$f())|RETURN(line 2)adviceexecution(void Foo.ajc$before$Foo$f())end public void ajc$before$Foo$f()public static void ajc$interMethod$Foo$Bar$bar(Bar)EffectiveSignatureAttribute(void Bar.bar(), methodexecution):methodexecution(void Bar.bar())|ALOAD0// Bar arg0(line 3)| methodcall(void Bar.foo())| |GETSTATIC Foo.ajc$perSingletonInstance LFoo;| |INVOKEVIRTUAL Foo.ajc$before$Foo$f ()V| |INVOKEVIRTUAL Bar.foo ()V| methodcall(void Bar.foo())|RETURNmethodexecution(void Bar.bar())end public static void ajc$interMethod$Foo$Bar$bar(Bar)public static void ajc$interMethodDispatch1$Foo$Bar$bar(Bar)EffectiveSignatureAttribute(void Bar.bar(), methodcall):ALOAD0// Bar arg0INVOKEVIRTUAL Bar.ajc$interMethodDispatch2$$bar ()VRETURNend public static void ajc$interMethodDispatch1$Foo$Bar$bar(Bar)public static Foo aspectOf()org.aspectj.weaver.AjAttribute$AjSynthetic@f8f7db:GETSTATIC Foo.ajc$perSingletonInstance LFoo;ARETURNend public static Foo aspectOf()public static boolean hasAspect()org.aspectj.weaver.AjAttribute$AjSynthetic@5856a5:GETSTATIC Foo.ajc$perSingletonInstance LFoo;IFNULL L0ICONST1IRETURNL0: ICONST0IRETURNend public static boolean hasAspect()private static void ajc$clinit()org.aspectj.weaver.AjAttribute$AjSynthetic@c39a20:NEW FooDUPINVOKESPECIAL Foo.<init ()VPUTSTATIC Foo.ajc$perSingletonInstance LFoo;RETURNend private static void ajc$clinit()end public class FooException thrown from AspectJ 1.1b2This might be logged as a bug alreadysee the bug database athttp://dev.eclipse.org (product: AspectJ, component: compiler)Bugs for exceptions thrown have titles File:line from the top stack,e.g., \"SomeFile.java:243\"If you don't find the exception below in a bug, please add a new bugTo make the bug a priority, please include a test programthat can reproduce this exception.nulljava.lang.NullPointerExceptionat org.aspectj.weaver.AsmAdaptor.findOrCreateBodyNode(Unknown Source)at org.aspectj.weaver.AsmAdaptor.getNode(Unknown Source)at org.aspectj.weaver.AsmAdaptor.noteMunger(Unknown Source)at org.aspectj.weaver.Shadow.implementMungers(Unknown Source)at org.aspectj.weaver.Shadow.implement(Unknown Source)at org.aspectj.weaver.bcel.BcelClassWeaver.implement(Unknown Source)at org.aspectj.weaver.bcel.BcelClassWeaver.weave(Unknown Source)at org.aspectj.weaver.bcel.BcelClassWeaver.weave(Unknown Source)at org.aspectj.weaver.bcel.BcelWeaver.weave(Unknown Source)at org.aspectj.weaver.bcel.BcelWeaver.weave(Unknown Source)at org.aspectj.ajdt.internal.core.builder.AjBuildManager.weaveAndGenerateClassFiles(Unknown Source)at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(Unknown Source)at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(Unknown Source)at org.aspectj.tools.ajc.Main.run(Unknown Source)at org.aspectj.tools.ajc.Main.runMain(Unknown Source)at org.aspectj.tools.ajc.Main.main(Unknown Source)1 fail|abort ", "EB": "", "SR": ""}