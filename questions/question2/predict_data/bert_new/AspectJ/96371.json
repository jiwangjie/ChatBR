{"id": "96371", "title": "Bug 96371Patch to support loading aop.xml properly", "description": "Bug 96371Patch to support loading aop.xml properly The following patchfixes the problem for me so I can load aop.xml files from jars on theclasspath without a global flag:ClassLoaderWeavingAdaptor.java:109:Enumeration xmls = loader.getResources(\"/METAINF/aop.xml\");+Enumeration xmls = loader.getResources(\"METAINF/aop.xml\");I.e., getResources doesn't work with a leading separator, at least not on theSun VM or JRockIt on Windows. ", "OB": "AspectJ 5 loadtime weaving in CVS HEAD isn't loading aop.xml files properlyfrom a jar file without specifying the global D flag. ", "EB": "", "SR": "Writing a unit test for this would requiresignificant changes to the loadtime module, so I wrote a standalone test ofthe API:public class TestApi extends TestCase {public void testLoadResource() throws Exception {URL urlList[] = { new URL(\"file:testsrc/org/aspectj/weaver/loadtime/test/sample.jar\") };ClassLoader loader = new URLClassLoader(urlList);Enumeration xmls = loader.getResources(\"METAINF/aop.xml\");//this version fails://Enumeration xmls = loader.getResources(\"/METAINF/aop.xml\");assertTrue(xmls.hasMoreElements());}} "}