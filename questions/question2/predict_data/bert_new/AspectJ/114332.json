{"id": "114332", "title": "Bug 114332Reflection API not detecting ITD method correctly in all circumstances", "description": "Bug 114332Reflection API not detecting ITD method correctly in all circumstances \"+itdmethods[i].getName());}}}Output: ITD Method:telecom.LongDistance.callRate ITD Method:telecom.Local.callRate ITD Method:telecom.Customer.addChargeExpected Output: ITD Method:telecom.Connection.callRate ITD Method:telecom.LongDistance.callRate ITD Method:telecom.Local.callRate ITD Method:telecom.Customer.addChargeI'm using ajde 1.5.0.20051014142856.Regards,Eduardo Pivetahttp://www.inf.ufrgs.br/~epiveta ", "OB": "As reported on the aspectj mailing list:Hi,I'm using the 'getDeclaredITDMethods' method (available in thereflection api) to find all ITD methods in the Billing aspect (fromthe aspectj examples).The Billing aspect contains 4 ITD methods (Connection.callRate,LongDistance.callRate, Local.callRate and Customer.addCharge), but Igot only 3 of them using this method.The 'Connection.callRate' is not returned by the'getDeclaredITDMethods' method (maybe because it is abstract). In theimplementation of method 'getDeclaredITDMethods' in'org.aspectj.internal.lang.reflect.AjTypeImpl' there is the followingcondition:if (!m.getName().contains(\"ajc$interMethod$\")) continue;Looking the names in the debbuger, I could not find a:public static longtelecom.Billing.ajc$interMethod$telecomBilling$telecomConnection$callRate(telecom.Connection)But only:public static longtelecom.Billing.ajc$interMethodDispatch1$telecomBilling$telecomConnection$callRate(telecom.Connection)if a take a concrete method, I get two objects, named:public static longtelecom.Billing.ajc$interMethod$telecomBilling$telecomLongDistance$callRate(telecom.LongDistance)public static longtelecom.Billing.ajc$interMethodDispatch1$telecomBilling$telecomLongDistance$callRate(telecom.LongDistance)One of them satisfies the predicate !m.getName().contains(\"ajc$interMethod$\").Is this behavior correct?ps. ", "EB": "", "SR": ": I'm using the example bellow.public aspect Billing {...public abstract long Connection.callRate();public long LongDistance.callRate() { return LONGDISTANCERATE; }public long Local.callRate() { return LOCALRATE; }public void Customer.addCharge(long charge){totalCharge += charge;}...}import org.aspectj.lang.reflect.AjType;import org.aspectj.lang.reflect.AjTypeSystem;import org.aspectj.lang.reflect.InterTypeMethodDeclaration;import telecom.Billing;public class Test {public static void main(String args[]) throws ClassNotFoundException{AjType c = AjTypeSystem.getAjType(Billing.class);InterTypeMethodDeclaration[] itdmethods = c.getDeclaredITDMethods();for (int i = 0; i < itdmethods.length; i++) {System.out.println(\"ITD Method:\" +itdmethods[i].getTargetType().getName()+\". "}