{"id": "30168", "title": "Bug 30168Error with certain combination of advice", "description": "Bug 30168Error with certain combination of advice This program causes the java VM to crash. PROGRAM CODEpackage test;import org.aspectj.lang. ;import org.aspectj.lang.reflect. ;public class Test3 {public static void main(String[] args) throws Exception {Test3 a = new Test3();a.foo(3);}public void foo(int i) {this.x=i;}int x;}aspect Log {pointcut assign(Object newval, Object targ):set( test..)&& args(newval) && target(targ);before(Object newval, Object targ): assign(newval,targ) {Signature sign = thisJoinPoint.getSignature();System.out.println(targ.toString() + \".\" + sign.getName() + \":=\" + newval);}/}// Different error message if you divide into two aspectsaspect Tracing {/pointcut tracedCall():call( test..(..))/ && !within(Tracing)/ && !within(Log);after() returning (Object o):tracedCall() {// Works if you comment out either of these two linesthisJoinPoint.getSignature();System.out.println(thisJoinPoint);}}2. RESULTS ON SOLARIS[erik@oden test] java test.Test3test.Test3@b8df17.x:=3Unexpected Signal : 11 occurred at PC=0xFA415A00Function=[Unknown. ]Library=(N/A)NOTE: We are unable to locate the function name symbol for the errorjust occurred. Please refer to release documentation for possiblereason and solutions.Current Java thread:Dynamic libraries:0x10000java0xff350000/usr/lib/libthread.so.10xff390000/usr/lib/libdl.so.10xff200000/usr/lib/libc.so.10xff330000/usr/platform/SUNW,Ultra250/lib/libcpsr.so.10xfe000000/usr/j2se/jre/lib/sparc/client/libjvm.so0xff2e0000/usr/lib/libCrun.so.10xff1e0000/usr/lib/libsocket.so.10xff100000/usr/lib/libnsl.so.10xff0d0000/usr/lib/libm.so.10xff310000/usr/lib/libw.so.10xff0b0000/usr/lib/libmp.so.20xff080000/usr/j2se/jre/lib/sparc/nativethreads/libhpi.so0xff050000/usr/j2se/jre/lib/sparc/libverify.so0xff020000/usr/j2se/jre/lib/sparc/libjava.so0xfe7e0000/usr/j2se/jre/lib/sparc/libzip.so0xfe5b0000/usr/lib/locale/svSE/svSE.so.2Local Time = Fri Jan 24 13:38:29 2003Elapsed Time = 2 HotSpot Virtual Machine Error : 11 Error ID : 4F530E43505002D3 01 Please report this error at http://java.sun.com/cgibin/bugreport.cgi Java VM: Java HotSpot(TM) Client VM (1.4.0b92 mixed mode) An error report file has been saved as hserrpid15099.log. Please refer to the file for further information.Abort[erik@oden test][erik@oden test] /usr/j2se.old/bin/java test.Test3test.Test3@1afa3.x:=3Unexpected Signal : 11 occurred at PC=0x85c24Function name=(N/A)Library=(N/A)NOTE: We are unable to locate the function name symbol for the errorjust occurred. Please refer to release documentation for possiblereason and solutions.Current Java thread:Dynamic libraries:0x10000/usr/j2se.old/bin/../bin/sparc/nativethreads/java0xff350000/usr/lib/libthread.so.10xff390000/usr/lib/libdl.so.10xff200000/usr/lib/libc.so.10xff330000/usr/platform/SUNW,Ultra250/lib/libcpsr.so.10xfe480000/usr/j2se.old/jre/lib/sparc/client/libjvm.so0xff2e0000/usr/lib/libCrun.so.10xff1e0000/usr/lib/libsocket.so.10xff100000/usr/lib/libnsl.so.10xff0d0000/usr/lib/libm.so.10xff310000/usr/lib/libw.so.10xff0b0000/usr/lib/libmp.so.20xff080000/usr/j2se.old/jre/lib/sparc/nativethreads/libhpi.so0xff050000/usr/j2se.old/jre/lib/sparc/libverify.so0xfe440000/usr/j2se.old/jre/lib/sparc/libjava.so0xff020000/usr/j2se.old/jre/lib/sparc/libzip.so0xfe260000/usr/lib/locale/svSE/svSE.so.2Local Time = Fri Jan 24 13:39:20 2003Elapsed Time = 2 HotSpot Virtual Machine Error : 11 Error ID : 4F530E43505002C4 01 Please report this error at http://java.sun.com/cgibin/bugreport.cgi Java VM: Java HotSpot(TM) Client VM (1.3.102b02 mixed mode) An error report file has been saved as hserrpid15100.log. test.Test3test.Test3@1a8c4e7.x:=3Exception in thread \"main\" java.lang.NullPointerExceptionat test.Log.ajc$afterReturning$testLog$30d(Test3.java:37)at test.Test3.main(Test3.java:8)java versionjava version \"1.4.101\"Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.101b01)Java HotSpot(TM) Client VM (build 1.4.101b01, mixed mode)java ", "OB": "RESULTS ON WINDOWS 2000Results on Windows 2000 (If I have copied it correctly)java classpath ..\\..\\aspectj1.1\\lib\\aspectjrt.jar;. ", "EB": "", "SR": "It is a minimal exampleif you remove anything in the aspects it works.1. Please refer to the file for further information.Abort[erik@oden test]3. "}