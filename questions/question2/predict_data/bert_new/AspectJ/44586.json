{"id": "44586", "title": "Bug 44586After throwing advice on ctors doesn't execute for intertype decls", "description": "", "OB": "Bug 44586After throwing advice on ctors doesn't execute for intertype decls The following code doesn't work in Ajc 1.1.1, in Ajc built from CVS HEAD (asof yesterday), nor in Ajc 1.0.6:Output:C:\\devel\\test\\excHandlingjava AfterThrowingCtorException in thread \"main\" java.lang.IllegalStateException: crashat Foo.initVal(AfterThrowingCtor.java:21)at AfterThrowingCtor.ajc$interFieldInit$AfterThrowingCtor$Foo$val(AfterThrowingCtor.java:9)at Foo.<init(AfterThrowingCtor.java:13)at AfterThrowingCtor.main(AfterThrowingCtor.java:6)Correct Output:threw java.lang.IllegalStateException: crash at execution(Foo())Exception in thread \"main\" java.lang.IllegalStateException: crashat Foo.initVal(AfterThrowingCtor.java:21)at AfterThrowingCtor.ajc$interFieldInit$AfterThrowingCtor$Foo$val(AfterThrowingCtor.java:9)at Foo.<init(AfterThrowingCtor.java:13)at AfterThrowingCtor.main(AfterThrowingCtor.java:6)Input source:public aspect AfterThrowingCtor {after() throwing (Throwable t) : execution(Foo.new(..)) {System.err.println(\"threw \"+t+\" at \"+thisJoinPointStaticPart);}public static void main(String args[]) {new Foo();}private Object Foo.val = Foo.initVal();}class Foo {Foo() {}// if you uncomment this line and comment out the intertype decl.// the advice runs correctly//private Object val = initVal();static Object initVal() {throw new IllegalStateException(\"crash\");}}AspectJ 1.1.1 runs the after throwing advice correctly if the field isdeclared normally (AspectJ 1.0.6 fails to do even this). ", "EB": "", "SR": ""}