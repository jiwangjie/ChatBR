{"id": "37212", "title": "Bug 37212Order sependencies in setting up menus", "description": "Bug 37212Order sependencies in setting up menus We stop when the user has done// something to dispose our window.//while (!shell.isDisposed()) {if (!display.readAndDispatch())display.sleep();}display.dispose();}} ", "OB": "In the following code example, reordering the statements \"A\", \"B\", \"C\" producesdiffering results (you'll need to replace the 'icon' with a reference to anavailable icon on your system)ABCmenu is shown with text and icon, and is enabledCABtext is not shownBCAtext is shown, but menu is disabledpackage swtbuilder.mainwindow;import org.eclipse.swt.SWT;import org.eclipse.swt.graphics.Image;import org.eclipse.swt.widgets.Display;import org.eclipse.swt.widgets.Menu;import org.eclipse.swt.widgets.MenuItem;import org.eclipse.swt.widgets.Shell;public class MenuManagerTest{public static Menu getMenuBar(Shell shell){Menu menuBar = new Menu(shell, SWT.BAR);String icon = \"c:/win32CopyDrop32x32.gif\";Image image = new Image(Display.getDefault(), icon);// Create the File Menu//MenuItem fileMenuItem = new MenuItem(menuBar, SWT.CASCADE);Menu fileMenu = new Menu(shell, SWT.DROPDOWN);fileMenuItem.setText(\"File\");fileMenuItem.setMenu(fileMenu);// Create the New Menu//MenuItem fileNewMenuItem = new MenuItem(fileMenu, SWT.CASCADE);Menu fileNewMenu = new Menu(shell, SWT.DROPDOWN);/A/fileNewMenuItem.setText(\"New\");/B/fileNewMenuItem.setMenu(fileNewMenu);/C/fileNewMenuItem.setImage(image);// Create the menu items//MenuItem item = new MenuItem(fileNewMenu, SWT.NONE);item.setImage(image);item.setText(\"New Thing\");return menuBar;}public static void main(String[] args) {final Display display = Display.getDefault();Shell shell = new Shell(display,SWT.TITLE | SWT.ICON | SWT.CLOSE);Menu menuBar = new Menu(shell, SWT.BAR);shell.setMenuBar(getMenuBar(shell));shell.open();// start the event loop. ", "EB": "", "SR": "In the following code example, reordering the statements \"A\", \"B\", \"C\" producesdiffering results (you'll need to replace the 'icon' with a reference to anavailable icon on your system)ABCmenu is shown with text and icon, and is enabledCABtext is not shownBCAtext is shown, but menu is disabledpackage swtbuilder.mainwindow;import org.eclipse.swt.SWT;import org.eclipse.swt.graphics.Image;import org.eclipse.swt.widgets.Display;import org.eclipse.swt.widgets.Menu;import org.eclipse.swt.widgets.MenuItem;import org.eclipse.swt.widgets.Shell;public class MenuManagerTest{public static Menu getMenuBar(Shell shell){Menu menuBar = new Menu(shell, SWT.BAR);String icon = \"c:/win32CopyDrop32x32.gif\";Image image = new Image(Display.getDefault(), icon);// Create the File Menu//MenuItem fileMenuItem = new MenuItem(menuBar, SWT.CASCADE);Menu fileMenu = new Menu(shell, SWT.DROPDOWN);fileMenuItem.setText(\"File\");fileMenuItem.setMenu(fileMenu);// Create the New Menu//MenuItem fileNewMenuItem = new MenuItem(fileMenu, SWT.CASCADE);Menu fileNewMenu = new Menu(shell, SWT.DROPDOWN);/A/fileNewMenuItem.setText(\"New\");/B/fileNewMenuItem.setMenu(fileNewMenu);/C/fileNewMenuItem.setImage(image);// Create the menu items//MenuItem item = new MenuItem(fileNewMenu, SWT.NONE);item.setImage(image);item.setText(\"New Thing\");return menuBar;}public static void main(String[] args) {final Display display = Display.getDefault();Shell shell = new Shell(display,SWT.TITLE | SWT.ICON | SWT.CLOSE);Menu menuBar = new Menu(shell, SWT.BAR);shell.setMenuBar(getMenuBar(shell));shell.open();// start the event loop. "}