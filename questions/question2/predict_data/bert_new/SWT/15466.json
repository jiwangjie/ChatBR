{"id": "15466", "title": "Bug 15466ImageData.blit throws ArrayIndexOutOfBounds Exception", "description": "Bug 15466ImageData.blit throws ArrayIndexOutOfBounds Exception ", "OB": "I'm running the M5 version of SWT and I get the ArrayIndexOutOfBounds exceptionwhen creating an Image with a large ImageData.This testcase passes when run with the version of swt that shipped with eclipse1.0.Here's my test case :import org.eclipse.swt.graphics.Image;import org.eclipse.swt.graphics.ImageData;import org.eclipse.swt.graphics.PaletteData;import org.eclipse.swt.graphics.RGB;import org.eclipse.swt.widgets.Display;public class SwtTestCase {public static void main(String[] args){SwtTestCase b = new SwtTestCase();ImageData a = new ImageData(100000, 90, 1, b.createPalette());try{Image c = new Image(Display.getDefault(), a);} catch (ArrayIndexOutOfBoundsException e){System.out.println(\"Array Index out of Bounds case by Imageconstructor\");e.printStackTrace();}System.out.println(\"Finished\");}private PaletteData createPalette(){try{RGB[] tempRGB = {new RGB(255,255,255), new RGB(0,0,0)};return (new PaletteData(tempRGB));} catch (Exception e){System.out.println(e);}return null;}}And here's my output for the M5 Version of swt :Array Index out of Bounds case by Image constructorjava.lang.ArrayIndexOutOfBoundsExceptionStack trace:java/lang/Throwable.<init()Vjava/lang/Throwable.<init(Ljava/lang/String;)Vjava/lang/ArrayIndexOutOfBoundsException.<init(Ljava/lang/String;)Vorg/eclipse/swt/graphics/ImageData.blit(I[BIIIIIII[B[B[BI[BI[BIIIIIII[B[B[BZZ)Vorg/eclipse/swt/graphics/Image.init(Lorg/eclipse/swt/graphics/Device;Lorg/eclipse/swt/graphics/Image;Lorg/eclipse/swt/graphics/ImageData;)[Iorg/eclipse/swt/graphics/Image.init(Lorg/eclipse/swt/graphics/Device;Lorg/eclipse/swt/graphics/ImageData;)Vorg/eclipse/swt/graphics/Image.<init(Lorg/eclipse/swt/graphics/Device;Lorg/eclipse/swt/graphics/ImageData;)VSwtTestCase.main([Ljava/lang/String;)VFinishedAnd here's the output for swt 1.0 :Finished ", "EB": "", "SR": "I'm running the M5 version of SWT and I get the ArrayIndexOutOfBounds exceptionwhen creating an Image with a large ImageData.This testcase passes when run with the version of swt that shipped with eclipse1.0.Here's my test case :import org.eclipse.swt.graphics.Image;import org.eclipse.swt.graphics.ImageData;import org.eclipse.swt.graphics.PaletteData;import org.eclipse.swt.graphics.RGB;import org.eclipse.swt.widgets.Display;public class SwtTestCase {public static void main(String[] args){SwtTestCase b = new SwtTestCase();ImageData a = new ImageData(100000, 90, 1, b.createPalette());try{Image c = new Image(Display.getDefault(), a);} catch (ArrayIndexOutOfBoundsException e){System.out.println(\"Array Index out of Bounds case by Imageconstructor\");e.printStackTrace();}System.out.println(\"Finished\");}private PaletteData createPalette(){try{RGB[] tempRGB = {new RGB(255,255,255), new RGB(0,0,0)};return (new PaletteData(tempRGB));} catch (Exception e){System.out.println(e);}return null;}}And here's my output for the M5 Version of swt :Array Index out of Bounds case by Image constructorjava.lang.ArrayIndexOutOfBoundsExceptionStack trace:java/lang/Throwable.<init()Vjava/lang/Throwable.<init(Ljava/lang/String;)Vjava/lang/ArrayIndexOutOfBoundsException.<init(Ljava/lang/String;)Vorg/eclipse/swt/graphics/ImageData.blit(I[BIIIIIII[B[B[BI[BI[BIIIIIII[B[B[BZZ)Vorg/eclipse/swt/graphics/Image.init(Lorg/eclipse/swt/graphics/Device;Lorg/eclipse/swt/graphics/Image;Lorg/eclipse/swt/graphics/ImageData;)[Iorg/eclipse/swt/graphics/Image.init(Lorg/eclipse/swt/graphics/Device;Lorg/eclipse/swt/graphics/ImageData;)Vorg/eclipse/swt/graphics/Image.<init(Lorg/eclipse/swt/graphics/Device;Lorg/eclipse/swt/graphics/ImageData;)VSwtTestCase.main([Ljava/lang/String;)VFinishedAnd here's the output for swt 1.0 :Finished "}