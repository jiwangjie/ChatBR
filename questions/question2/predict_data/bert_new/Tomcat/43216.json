{"id": "43216", "title": "Bug 43216ACTIVITYCHECK does not work correctly when Tomcat is restarted", "description": "Bug 43216ACTIVITYCHECK does not work correctly when Tomcat is restarted Hi,I noticed that org.apache.catalina.session.StandardSession.ACTIVITYCHECK doesnot work correctly because the StandardSessionaccessCount will be set as 1when Tomcat is restarted and session is loaded from the SESSION.ser file.StandardManagerdoLoad() calls session.endAccess() and this method execute 2 things.set isNew = falsedecrement accessCountI think isNew attribute is already set by session.readObjectData(ois) inStandardManagerdoLoad(),and accessCount is already set as 0.IMHO, it is not necessary calling session.endAccess() in the doLoad().Here is a patch.Index: /tc6.0.x/trunk/java/org/apache/catalina/session/StandardManager.java=================================================================== /tc6.0.x/trunk/java/org/apache/catalina/session/StandardManager.java(revision 569774)+++ /tc6.0.x/trunk/java/org/apache/catalina/session/StandardManager.java(working copy)@@ 395,7 +395,6 @@session.setManager(this);sessions.put(session.getIdInternal(), session);session.activate();session.endAccess();}} catch (ClassNotFoundException e) {log.error(sm.getString(\"standardManager.loading.cnfe\", e), e); ", "OB": "", "EB": "", "SR": ""}