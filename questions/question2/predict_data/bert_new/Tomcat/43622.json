{"id": "43622", "title": "Bug 43622compression / minCompressionSize attribute not properly implemented", "description": "Bug 43622compression / minCompressionSize attribute not properly implemented ", "OB": "2 of the compression related attributes for the http connector are:compression = on | off | force | <integer valThe documentation states that integer val will be implemented as:compression=\"on\" and minCompressionSize = <integer valminCompressionSize = <integer val(The documentation for 5.5.12 doesnt mention this at all, but read this in theserver.xml)The problem is that the documenation gives the impression that only settingcompression=\"some integer val\" is sufficient, however the way the code iswritten, the value of \"minCompressionSize\" always overrides the value specifiedin the \"compression\" field. Even if minCompressionSize isnt set, it will stillget the default value of 2048 and override whatever value was there in the\"compression\" field.I looked at the implementation of the http11 connector and found the followingcode that might be the culprit:In org.apache.coyote.http11.Http11BaseProtocol.Http11ConnectionHandler.initprocessor.setCompression( proto.compression );processor.setCompressionMinSize( proto.compressionMinSize);since the \"setCompressionMinSize\" is called after compressionMinSize, its valuewill override the value read from compression atttribute.I have looked at the code for Tomcat 6.0 also, and the problems appears to stillbe present. ", "EB": "", "SR": ""}