{"id": "50105", "title": "Bug 50105Violation of JSPEL spec version 2.1 when coerce Enum to String", "description": "This is not always the case in Tomcat 6.0.29. ", "OB": "Bug 50105Violation of JSPEL spec version 2.1 when coerce Enum to String Section 1.18.2 of the 2.1 JSPEL spec (Coerce A to String) says \"if A is Enum, return A.name()\". ", "EB": "", "SR": "To demonstrate the bug, I created some custom code (enum, Tag, JSP):Tag:public class MyCustomTag implements Tag {public void setValue(String value) {System.out.println(value);}@Override public void setPageContext(PageContext pc) {}@Override public void setParent(Tag t) {}@Override public Tag getParent() { return null; }@Override public int doStartTag() throws JspException { return SKIPBODY; }@Override public int doEndTag() throws JspException { return EVALPAGE; }@Override public void release() {}}TLD:<?xml version=\"1.0\" encoding=\"UTF8\" ?<taglib xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaeewebjsptaglibrary21.xsd\" xmlns=\"http://java.sun.com/xml/ns/javaee\"xmlns:xsi=\"http://www.w3.org/2001/XMLSchemainstance\" version=\"2.1\"<tlibversion1.0</tlibversion<urihttp://mydomain.org/customLib</uri<tag<namecustomTag</name<tagclassmypackage.MyCustomTag</tagclass<bodycontentempty</bodycontent<attribute<namevalue</name<requiredtrue</required<rtexprvaluetrue</rtexprvalue</attribute</tag</taglibEnum:public enum MyEnum {APPLE, ORANGE;@Overridepublic String toString() {return \"this is a \" + name();}}JSP:<%@taglib prefix=\"myLib\" uri=\"http://mydomain.org/customLib\"%<myLib:customTag value=\"${myEnum}\"/<myLib:customTag value=\"foo.${myEnum}.bar\"/Because the value myEnum is was set to MyEnum.ORANGE, i would expect, that this outputs:ORANGEfoo.ORANGE.barBut the output in catalina.out instead is:ORANGEfoo.this is a ORANGE.barWhich is a violation of the JSPEL spec (if I understood it right). "}