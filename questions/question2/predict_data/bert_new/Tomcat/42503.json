{"id": "42503", "title": "Bug 42503ServletContext.getResourceAsStream returns stale data", "description": "(I used Tomcat 6's trunk for the test)% cat test.txtabcd% telnet . 9080Trying 0.0.0.0...Connected to ..Escape character is '^]'.GET /test.jsp HTTP/1.0HTTP/1.1 200 OKServer: ApacheCoyote/1.1SetCookie: JSESSIONID=706D6FE8B06687509D42E79DBEE266EF; Path=/ContentType: text/htmlContentLength: 26Date: Wed, 23 May 2007 23:03:05 GMTConnection: closeFile contents=[abcd]Connection to . 9080Trying 0.0.0.0...Connected to ..Escape character is '^]'.GET /test.jsp HTTP/1.0HTTP/1.1 200 OKServer: ApacheCoyote/1.1SetCookie: JSESSIONID=2B144247B747F54184114FA82869DE14; Path=/ContentType: text/htmlContentLength: 26Date: Wed, 23 May 2007 23:04:24 GMTConnection: closeFile contents=[abcd] ", "OB": "Bug 42503ServletContext.getResourceAsStream returns stale data closed by foreign host.% cat test.txt (change the contents but not the size)efgh % telnet . ", "EB": "", "SR": "Under certain conditions, the resource cache implementation used by theservlet/JSP engine (in org.apache.naming.resource) does not detect that a filein its cache has been modified and therefore returns the previous contents ofthe file.This happens only when the file contents are modified but the file length doesn't changeuntil the time the first change in the file is detected after server startupTo reproduce the problem, put the attached test.jsp and test.txt into the ROOTweb app and then do the following. "}