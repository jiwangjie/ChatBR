{"id": "50759", "title": "Bug 50759ValidatorClassName Validation fails to set lastValidated timestamp", "description": "", "OB": "Bug 50759ValidatorClassName Validation fails to set lastValidated timestamp When using a custom validator (48817), after the first validation event occurs, every subsequent query on the connection results in the Validator being run.I believe this is due to the lastValidated timestamp not being set when the Validator class is run:http://svn.apache.org/viewvc/tomcat/tags/JDBCPOOL1093/java/org/apache/tomcat/jdbc/pool/PooledConnection.java?revision=1061025&view=markup(lines 419420)public boolean validate(int validateAction,String sql) {...if (poolProperties.getValidator() != null) {return poolProperties.getValidator().validate(connection, validateAction);}....}maybe should be:public boolean validate(int validateAction,String sql) {...if (poolProperties.getValidator() != null) {boolean val = poolProperties.getValidator().validate(connection, validateAction);this.lastValidated = now;return val;}....}/dom ", "EB": "", "SR": ""}