{"bug_id": "34925", "title": "Bug 34925compiler crash on yesterday's rc1 build", "description": "These test files crash the compiler (in fact if you just compileConvertToUnchecked it crashes it):ConvertToUnchecked.java:import java.io.IOException;// example 3aspect ConvertToUnchecked {// make all exceptions in an application unchecked; \"soft\"//declare soft: (Exception && !RuntimeException): within(com.foo.app..);// convert IOExceptions in a package to PersistenceExceptionpointcut module() : within(test.); // within(com.foo.framework.persistence.);// convert exceptions// within(test.) would work to allow an immediate catch, except for// the last statement in a try block// however, I suspect that would also generate inefficient code// even this might be inefficient: it needs to wrap every method body in a// try ... catch blockafter() throwing (IOException e) : within(test.) {throw new PersistenceException(e);}declare soft: (IOException): module();}// tested by: test.ConvertToUncheckedPersistenceException.javapublic class PersistenceException extends Exception{public PersistenceException(Throwable cause) {super(cause);}}sample run:C:\\ron\\devel\\articles\\errorHandlingajc 1.4 ConvertToUnchecked.javaPersistenceException.javajava.lang.RuntimeException: unimplemented: throw new PersistenceException(e)at org.aspectj.ajdt.internal.compiler.lookup.EclipseShadow.makeShadow(EclipseShadow.java:148)at org.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.makeShadow(EclipseFactory.java:292)atorg.aspectj.ajdt.internal.compiler.problem.AjProblemReporter.unhandledException(AjProblemReporter.java:67)atorg.eclipse.jdt.internal.compiler.flow.FlowContext.checkExceptionHandlers(FlowContext.java:249)at org.eclipse.jdt.internal.compiler.ast.ThrowStatement.analyseCode(ThrowStatement.java:35)atorg.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.analyseCode(AbstractMethodDeclaration.java:106)at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.analyseCode(TypeDeclaration.java:445)atorg.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.analyseCode(CompilationUnitDeclaration.java:76)at org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:539)at org.aspectj.ajdt.internal.compiler.AjCompiler.process(AjCompiler.java:65)at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:340)at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:232)at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:171)atorg.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run(AjBuildManager.java:656)at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:139)at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:55)at org.aspectj.tools.ajc.Main.run(Main.java:216)at org.aspectj.tools.ajc.Main.runMain(Main.java:155)at org.aspectj.tools.ajc.Main.main(Main.java:72)C:\\ron\\devel\\articles\\errorHandling\\ConvertToUnchecked.java:0 Internal compilererrorjava.lang.RuntimeException: unimplemented: throw new PersistenceException(e)at org.aspectj.ajdt.internal.compiler.lookup.EclipseShadow.makeShadow(EclipseShadow.java:148)at org.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.makeShadow(EclipseFactory.java:292)atorg.aspectj.ajdt.internal.compiler.problem.AjProblemReporter.unhandledException(AjProblemReporter.java:67)atorg.eclipse.jdt.internal.compiler.flow.FlowContext.checkExceptionHandlers(FlowContext.java:249)at org.eclipse.jdt.internal.compiler.ast.ThrowStatement.analyseCode(ThrowStatement.java:35)atorg.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.analyseCode(AbstractMethodDeclaration.java:106)at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.analyseCode(TypeDeclaration.java:445)atorg.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.analyseCode(CompilationUnitDeclaration.java:76)at org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:539)at org.aspectj.ajdt.internal.compiler.AjCompiler.process(AjCompiler.java:65)at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:340)at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:232)at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:171)atorg.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run(AjBuildManager.java:656)at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:139)at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:55)at org.aspectj.tools.ajc.Main.run(Main.java:216)at org.aspectj.tools.ajc.Main.runMain(Main.java:155)at org.aspectj.tools.ajc.Main.main(Main.java:72)!! no source information available !!ABORTException thrown from AspectJ 1.1rc1This might be logged as a bug already  find current bugs athttp://bugs.eclipse.org/bugs/buglist.cgi?product=AspectJ&component=CompilerBugs for exceptions thrown have titles File:line from the top stack,e.g., \"SomeFile.java:243\"If you don't find the exception below in a bug, please add a new bugat http://bugs.eclipse.org/bugs/enterbug.cgi?product=AspectJTo make the bug a priority, please include a test programthat can reproduce this exception.unimplemented: throw new PersistenceException(e)unimplemented: throw new PersistenceException(e)java.lang.RuntimeException: unimplemented: throw new PersistenceException(e)at org.aspectj.ajdt.internal.compiler.lookup.EclipseShadow.makeShadow(EclipseShadow.java:148)at org.aspectj.ajdt.internal.compiler.lookup.EclipseFactory.makeShadow(EclipseFactory.java:292)atorg.aspectj.ajdt.internal.compiler.problem.AjProblemReporter.unhandledException(AjProblemReporter.java:67)atorg.eclipse.jdt.internal.compiler.flow.FlowContext.checkExceptionHandlers(FlowContext.java:249)at org.eclipse.jdt.internal.compiler.ast.ThrowStatement.analyseCode(ThrowStatement.java:35)atorg.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.analyseCode(AbstractMethodDeclaration.java:106)at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.analyseCode(TypeDeclaration.java:445)atorg.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.analyseCode(CompilationUnitDeclaration.java:76)at org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:539)at org.aspectj.ajdt.internal.compiler.AjCompiler.process(AjCompiler.java:65)at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:340)at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:232)at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:171)atorg.aspectj.ajdt.internal.core.builder.AjBuildManager$BatchBuilder.run(AjBuildManager.java:656)at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:139)at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:55)at org.aspectj.tools.ajc.Main.run(Main.java:216)at org.aspectj.tools.ajc.Main.runMain(Main.java:155)at org.aspectj.tools.ajc.Main.main(Main.java:72)1 fail|abort, 1 error"}