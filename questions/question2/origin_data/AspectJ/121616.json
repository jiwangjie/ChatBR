{"bug_id": "121616", "title": "Bug 121616[@AspectJ]Lacking import for JoinPoint crahes the compiler", "description": "Encountered during a JavaPolis demo. I was using a prereleasedevelopment version. However, reproducable with latest postreleasedevelopment version as well.Create the following source file:package banking;import org.aspectj.lang.annotation.Aspect;import org.aspectj.lang.annotation.Pointcut;public class Main {public static void main(String[] args) {System.out.println(\"Main\");}}@Aspectclass MainLogger {@Pointcut(\"execution( main(..))\")public void log(JoinPoint thisJoinPoint) {System.out.println(\"Before \" thisJoinPoint\");}}Note that the import statement for JoinPoint is lacking. Compiling thissource file crahses the compiler. Adding import statement for JoinPointmakes it work fine.C:\\work\\aop\\src\\workspace\\CallDebugBugajc versionAspectJ Compiler DEVELOPMENT built on Tuesday Dec 20, 2005 at 13:58:29 GMTC:\\work\\aop\\src\\workspace\\CallDebugBugajc 1.5 banking\\Main.javaC:\\work\\aop\\src\\workspace\\CallDebugBug\\banking\\Main.java [error] Internal compiler errorjava.lang.NullPointerExceptionat org.aspectj.ajdt.internal.compiler.ast.ValidateAtAspectJAnnotationsVisitor.buildFormalAdviceBindingsFrom(ValidateAtAspectJAnnotationsVisitor.java:417)at org.aspectj.ajdt.internal.compiler.ast.ValidateAtAspectJAnnotationsVisitor.convertToPointcutDeclaration(ValidateAtAspectJAnnotationsVisitor.java:513)at org.aspectj.ajdt.internal.compiler.ast.ValidateAtAspectJAnnotationsVisitor.visit(ValidateAtAspectJAnnotationsVisitor.java:188)at org.aspectj.org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.traverse(MethodDeclaration.java:185)at org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.traverse(TypeDeclaration.java:1195)at org.aspectj.org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.traverse(CompilationUnitDeclaration.java:339)at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.beforeAnalysing(AjCompilerAdapter.java:154)at org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$before$orgaspectjajdtinternalcompilerCompilerAdapter$7$db78446d(CompilerAdapter.aj:101)at org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:517)at org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:329)at org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:811)at org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:230)at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:156)at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:112)at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:60)at org.aspectj.tools.ajc.Main.run(Main.java:326)at org.aspectj.tools.ajc.Main.runMain(Main.java:240)at org.aspectj.tools.ajc.Main.main(Main.java:83)(no source information available)C:\\work\\aop\\src\\workspace\\CallDebugBug\\banking\\Main.java:16 [error] JoinPoint cannot be resolved to a typepublic void log(JoinPoint thisJoinPoint) {^^^^^^^C:\\work\\aop\\src\\workspace\\CallDebugBug\\banking\\Main.java:17 [error] Syntax error, insert \")\" to complete MethodInvocationSystem.out.println(\"Before \" thisJoinPoint\");C:\\work\\aop\\src\\workspace\\CallDebugBug\\banking\\Main.java:17 [error] Syntax error, insert \";\" to complete BlockStatementsSystem.out.println(\"Before \" thisJoinPoint\");ABORTException thrown from AspectJ DEVELOPMENTThis might be logged as a bug already  find current bugs athttp://bugs.eclipse.org/bugs/buglist.cgi?product=AspectJ&component=CompilerBugs for exceptions thrown have titles File:line from the top stack,e.g., \"SomeFile.java:243\"If you don't find the exception below in a bug, please add a new bugat http://bugs.eclipse.org/bugs/enterbug.cgi?product=AspectJTo make the bug a priority, please include a test programthat can reproduce this exception.when validating @AspectJ annotations logwhen analysing types defined in compilation unit C:\\work\\aop\\src\\workspace\\CallDebugBug\\banking\\Main.javawhen processing compilation unit C:\\work\\aop\\src\\workspace\\CallDebugBug\\banking\\Main.javawhen batch building with classpath: c:\\java\\jdk1.5.004\\jre\\lib\\ext\\dnsns.jar;c:\\java\\jdk1.5.004\\jre\\lib\\ext\\localedata.jar;c:\\java\\jdk1.5.004\\jre\\lib\\ext\\sunjceprovider.jar;c:\\java\\jdk1.5.004\\jre\\lib\\ext\\sunpkcs11.jar;c:\\java\\jdk1.5.004\\lib\\tools.jar;c:\\java\\jdk1.5.004\\jre\\lib\\rt.jar;C:\\java\\aspectj\\aspectj5\\lib\\aspectjrt.jar;C:\\java\\log4j\\jakartalog4j1.2.8\\dist\\lib\\log4j1.2.8.jar;C:\\java\\jess\\Jess61p5\\jess.jar;c:\\java\\j2sdkee1.3.1\\lib\\system\\cloudscape.jar;c:\\java\\j2sdkee1.3.1\\lib\\system\\tools.jar;c:\\java\\j2sdkee1.3.1\\lib\\cloudscape\\RmiJdbc.jar;c:\\java\\j2sdkee1.3.1\\lib\\cloudscape\\cloudclient.jar;c:\\java\\j2sdkee1.3.1\\lib\\classes;c:\\java\\j2sdkee1.3.1\\classes;c:\\java\\j2sdkee1.3.1\\lib\\j2ee.jar;c:\\java\\j2sdkee1.3.1\\lib\\toolclasses;c:\\java\\j2sdkee1.3.1\\lib\\j2eetools.jar;c:\\java\\j2sdkee1.3.1\\lib\\locale;c:\\java\\j2sdkee1.3.1\\lib\\j2ee.jar;c:\\java\\j2sdkee1.3.1\\lib\\jhall.jar;c:\\java\\j2sdkee1.3.1\\lib\\locale;c:\\java\\jdk1.5.004\\lib\\tools.jar;c:\\java\\j2sdkee1.3.1\\lib\\jhall.jar;C:\\java\\ws\\axis\\axis11\\lib\\axis.jar;C:\\java\\ws\\axis\\axis11\\lib\\axisant.jar;C:\\java\\ws\\axis\\axis11\\lib\\commonsdiscovery.jar;C:\\java\\ws\\axis\\axis11\\lib\\commonslogging.jar;C:\\java\\ws\\axis\\axis11\\lib\\jaxrpc.jar;C:\\java\\ws\\axis\\axis11\\lib\\saaj.jar;C:\\java\\ws\\axis\\axis11\\lib\\log4j1.2.8.jar;C:\\java\\ws\\axis\\axis11\\lib\\wsdl4j.jar;C:\\java\\concurrency\\concurrency.jar;C:\\java\\junit\\junit3.8.1\\junit.jar;.;nulljava.lang.NullPointerExceptionat org.aspectj.ajdt.internal.compiler.ast.ValidateAtAspectJAnnotationsVisitor.buildFormalAdviceBindingsFrom(ValidateAtAspectJAnnotationsVisitor.java:417)at org.aspectj.ajdt.internal.compiler.ast.ValidateAtAspectJAnnotationsVisitor.convertToPointcutDeclaration(ValidateAtAspectJAnnotationsVisitor.java:513)at org.aspectj.ajdt.internal.compiler.ast.ValidateAtAspectJAnnotationsVisitor.visit(ValidateAtAspectJAnnotationsVisitor.java:188)at org.aspectj.org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.traverse(MethodDeclaration.java:185)at org.aspectj.org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.traverse(TypeDeclaration.java:1195)at org.aspectj.org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.traverse(CompilationUnitDeclaration.java:339)at org.aspectj.ajdt.internal.compiler.AjCompilerAdapter.beforeAnalysing(AjCompilerAdapter.java:154)at org.aspectj.ajdt.internal.compiler.CompilerAdapter.ajc$before$orgaspectjajdtinternalcompilerCompilerAdapter$7$db78446d(CompilerAdapter.aj:101)at org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.process(Compiler.java:517)at org.aspectj.org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:329)at org.aspectj.ajdt.internal.core.builder.AjBuildManager.performCompilation(AjBuildManager.java:811)at org.aspectj.ajdt.internal.core.builder.AjBuildManager.doBuild(AjBuildManager.java:230)at org.aspectj.ajdt.internal.core.builder.AjBuildManager.batchBuild(AjBuildManager.java:156)at org.aspectj.ajdt.ajc.AjdtCommand.doCommand(AjdtCommand.java:112)at org.aspectj.ajdt.ajc.AjdtCommand.runCommand(AjdtCommand.java:60)at org.aspectj.tools.ajc.Main.run(Main.java:326)at org.aspectj.tools.ajc.Main.runMain(Main.java:240)at org.aspectj.tools.ajc.Main.main(Main.java:83)1 fail|abort, 4 errors"}