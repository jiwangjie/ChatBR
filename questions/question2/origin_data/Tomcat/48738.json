{"bug_id": "48738", "title": "Bug 48738[PATCH]Allow GzipOutputFilter to send partial result when flushBuffer() is called", "description": "Created attachment 24979 [details]patch for the making GzipOutputFilter work with early flushAs part of our site speed optimizations (at Linkedin) we bumped into a problem when trying to do partial flush of compressed content stream from Tomcat to the browser. We discovered the root cause to be a couple of long outstanding JDK bugs: http://bugs.sun.com/bugdatabase/viewbug.do?bugid=4255743 http://bugs.sun.com/bugdatabase/viewbug.do?bugid=4813885Basically, with the GzipOutputFilter turned on, the GZIPOutputStream it uses internally buffers the data that's been sent over, and does not flush to client (browser) when flushBuffer() is invoked.We have produced a patch which we verified internally, that it did work to do a partial flush on the compressed stream. We also have a unit testcase included in the patch to quickly show the problem.Early flush is a quite useful technique that many sites out there can benefit from to speed up the page download/rendering time, and by having it working in tomcat would benefit the existing and new customers.Thanks!"}