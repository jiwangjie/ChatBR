{"bug_id": "46354", "title": "Bug 46354LIMITBUFFER setting causes arraycopy errors", "description": "Per the advice in this issue:http://issues.apache.org/bugzilla/showbug.cgi?id=37793We just tried to apply the following setting to our Tomcat instancesDorg.apache.jasper.runtime.BodyContentImpl.LIMITBUFFER=trueA short time after applying this setting, we would start seeing the following stack traces on various random requests.SEVERE: Servlet.service() for servlet jsp threw exceptionjava.lang.ArrayIndexOutOfBoundsExceptionat java.lang.System.arraycopy(System.java)at java.lang.String.getChars(String.java:855)at org.apache.jasper.runtime.BodyContentImpl.write(BodyContentImpl.java:146)at org.apache.jasper.runtime.BodyContentImpl.write(BodyContentImpl.java:159)at org.apache.jsp.tag.web.arch.patterns.DetailInspector.listtag.jspxmethc005fif005f3(listtag.java:683)at org.apache.jsp.tag.web.arch.patterns.DetailInspector.listtag.jspxmethc005fforEach005f0(listtag.java:630)at org.apache.jsp.tag.web.arch.patterns.DetailInspector.listtag.doTag(listtag.java:302)at org.apache.jsp.WEB002dINF.pages.registrar.academic.Student.inspect.pgmstudy002dtabjsp.jspxmethdetail005flist005f0(pgmstudy002dtabjsp.java:224)at org.apache.jsp.WEB002dINF.pages.registrar.academic.Student.inspect.pgmstudy002dtabjsp.access$0(pgmstudy002dtabjsp.java:214)at org.apache.jsp.WEB002dINF.pages.registrar.academic.Student.inspect.pgmstudy002dtabjsp$pgmstudy002dtabjspHelper.invoke0(pgmstudy002dtabjsp.java:492)at org.apache.jsp.WEB002dINF.pages.registrar.academic.Student.inspect.pgmstudy002dtabjsp$pgmstudy002dtabjspHelper.invoke(pgmstudy002dtabjsp.java:571)at org.apache.jsp.tag.web.arch.patterns.DetailInspector.inspectortag.doTag(inspectortag.java:163)at org.apache.jsp.WEB002dINF.pages.registrar.academic.Student.inspect.pgmstudy002dtabjsp.jspService(pgmstudy002dtabjsp.java:151)at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98)at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:328)at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:315)at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)...If we remove the setting, then things behave normally (albeit with the memory issues discussed in the linked issue).We are running on top of java version 1.6.0."}