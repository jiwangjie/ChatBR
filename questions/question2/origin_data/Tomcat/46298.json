{"bug_id": "46298", "title": "Bug 46298JDBCRealm.open() throws NullPointerException if the specified driver doesn't handle the specified JDBC URL", "description": "Created attachment 22949 [details]Check returned connection for null in JDBCRealm.open()Per the Driver.connect(String, Properties) docs: The driver should return \"null\" if it realizes it is the wrong kind of driver to connect to the given URL.I ran into this when I fatfingered the JDBC URL's prefix (jdbc:msql: instead of jdbc:mysql: with the MySQL driver).The offending code calls Driver.connect and immediately calls setAutoCommit(false) on the resulting driver without checking that the connect returned a connection.I've attached a patch based from TOMCAT6018 that addresses the issue."}