{"bug_id": "49924", "title": "Bug 49924When nonprimary node changes into a primary node, isPrimarySession is not changed to true.", "description": "If BackupManager is used,when a primary node is switched,DeltaSessionisPrimarySession is not changed to true.Nonprimary node changes into a primary nodewhen a primary node is stopped or we get a nonprimary session.If a primary node is stopped, a primary node is switched.In AbstractReplicatedMap, when a primary node is switched,MapOwner(BackupManager)objectMadePrimay is called.However, isPrimarySession does not change to true in this method.=====BackupManagerobjectMadePrimay=====public void objectMadePrimay(Object key, Object value) {if (value!=null && value instanceof DeltaSession) {DeltaSession session = (DeltaSession)value;synchronized (session) {session.access();session.endAccess();}}}=====If we get a nonprimary session,a primary node is switched.However, isPrimarySession does not change to true.It is only a change of primary node.I made a patch.It contains the following.isPrimarySession is set to true in BackupManagerobjectMadePrimay.When get() is called in nonprimary node, MapOwnerobjectMadePrimay is called.Best regards."}