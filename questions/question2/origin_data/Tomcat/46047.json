{"bug_id": "46047", "title": "Bug 46047Issue when using include directive inside tag files that are inside jar files", "description": "Created attachment 22760 [details]patch for ParserController classWhen we use the include directive inside a tag file like :<%@ tag bodycontent=\"empty\" description=\"Renders a date control to query the creation date of a content object.\" %<%@include file=\"/METAINF/tags/search/declaration.tagf\" %And that this tag file is inside a jar file, jasper has an issue dealing the dependencies by losing the fact that the included file is inside a jar file.static {jspxdependants = new java.util.ArrayList(4);jspxdependants.add(\"/METAINF/tags/search/declaration.tagf\");jspxdependants.add(\"/METAINF/tags/search/date.tagf\");jspxdependants.add(\"jar:file:/home/rincevent/tools/apachetomcat6.0.18/webapps/jahia/WEBINF/lib/jahiataglib6.0SNAPSHOT.jar!/METAINF/search.tld\");jspxdependants.add(\"jar:file:/home/rincevent/tools/apachetomcat6.0.18/webapps/jahia/WEBINF/lib/jahiataglib6.0SNAPSHOT.jar!/METAINF/tags/search/resultsPageUrl.tag\");}The other dependencies are handled correctly thanks to patch https://issues.apache.org/bugzilla/showbug.cgi?id=43741 .I propose a patch to ParserController so that when we detect that we are inside a jarFile we prepend the jarFileUrl to absFileName.The patch has been made on the trunk source code of tomcat."}