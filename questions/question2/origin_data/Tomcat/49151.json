{"bug_id": "49151", "title": "Bug 49151ClassCastException in BackupManagerstopInternal.", "description": "In BackupManagerstartInternal,When constructor of LazyReplicatedMap throws exception,sessions is not LazyReplicatedMap.Actually, AbstractReplicatedMapinit has the possibility of throwing RuntimeException.In BackupManagerstopInternal ClassCastException is thrownbecause AbstractReplicatedMapbreakdown is executed regardless of the type of sessions.should be changed as follows to avoid ClassCastException.===skip.if (sessions instanceof LazyReplicatedMap) {LazyReplicatedMap map = (LazyReplicatedMap)sessions;if ( map!=null ) {map.breakdown();}}skip.===This problem exists in Tomcat7.0 and 6.0.Best Regards."}