{"bug_id": "40913", "title": "Bug 40913JasperException raised against valid attribute", "description": "In org.apache.jasper.compiler.Validator.checkXmlAttributes(), the validationfor deferred values and methods is raising an exception when an rtexprvalueattribute is legitimate.Stacktraceorg.apache.jasper.JasperException:org.apache.jasper.JasperException: /index.jsp(83,0)According to TLD or attribute directive in tag file, attribute itemsdoes not accept any expressionsorg.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:565)org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:354)org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)javax.servlet.http.HttpServlet.service(HttpServlet.java:803)relevant code in checkXmlAttributes() if (!deferred && (tldAttrs[j].isDeferredMethod() || tldAttrs[j].isDeferredValue())) {// Only deferred expressions are allowed for this attributeerr.jspError(n, \"jsp.error.attribute.custom.nonrtwithexpr\",tldAttrs[j].getName()); }testcase<c:forEach var=\"k\" items=\"${colors}\"<li<font color=\"${k}\"This line is ${k}</font.</c:forEachThe TLD for JSTL 1.2 says items can be an rtexprvalue and also a deferredvalue.So the above usage is correct.Attaching a testcase WAR.summaryI don't think this code is really necessary; at least, it needs to be relaxedto allow tai.canBeRequestTime() values."}