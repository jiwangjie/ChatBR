{"bug_id": "50720", "title": "Bug 50720When using jsp mapped as servlet in web.xml, cyrillic characters are not allowed in web.xml", "description": "Created attachment 26605 [details]Simple test web applicationI am using web.xml in it simplest, incomlete form (note that making it100% Servlet API 3.0 compliant does not help)<?xml version=\"1.0\" encoding=\"Windows1251\"?<webapp<! below are word testing Testoviy in cyrillic, try to use another symbols <displayname\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 web.xml</displayname<servlet<servletnameTestJSPMount</servletname<jspfile/test.jsp</jspfile</servlet<servletmapping<servletnameTestJSPMount</servletname<urlpattern/test.html</urlpattern</servletmapping</webappDuring startup, tomcat throws exception:04/02/2011 16:07:39 S   StandardContext.loadOnStartup: Servlet/testcyrwebxml threw load() exceptioncom.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException:Invalid byte 2 of 2byte UTF8 sequence.at com.sun.org.apache.xerces.internal.impl.io.UTF8Reader.invalidByte(UnknownSource)at com.sun.org.apache.xerces.internal.impl.io.UTF8Reader.read(Unknown Source)at com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.load(UnknownSource)at com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.peekChar(UnknownSource)at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(UnknownSource)at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(UnknownSource)at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(UnknownSource)at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(UnknownSource)at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(UnknownSource)at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(UnknownSource)at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(UnknownSource)at org.apache.jasper.xmlparser.ParserUtils.parseXMLDocument(ParserUtils.java:96)at org.apache.jasper.compiler.JspConfig.processWebDotXml(JspConfig.java:83)at org.apache.jasper.compiler.JspConfig.init(JspConfig.java:231)at org.apache.jasper.compiler.JspConfig.findJspProperty(JspConfig.java:290)at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:113)at org.apache.jasper.compiler.Compiler.compile(Compiler.java:365)at org.apache.jasper.compiler.Compiler.compile(Compiler.java:345)at org.apache.jasper.compiler.Compiler.compile(Compiler.java:332)at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:594)at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:342)at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)at org.apache.jasper.servlet.JspServlet.init(JspServlet.java:128)at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1133)at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1087)at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:996)at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4741)at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5062)at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5057)at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)at java.util.concurrent.FutureTask.run(Unknown Source)at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)at java.lang.Thread.run(Unknown Source)Platform in use:Tomcat 7.0.6 binary windows releaseJDK 1.6.018 x86Windows 7 x64If I change encoding of web.xml to UTF8 it does not help also.The only fix for this problem is to use only ISO88591 characters.I believe it is somehow related to some early initialization sequence,when jsp is mapped as servlet."}