{"code": 200, "status": "success", "bug_report": {"0": {"text": "Bug 49195  Using -1 as shutdown port with Windows service works, but prints error message.", "labels": ["OB"]}, "1": {"text": "1.", "labels": ["OB", "SR"]}, "2": {"text": "Install Tomcat as a service on Windows 2.", "labels": ["SR"]}, "3": {"text": "Specify <Server port=\"-1\" in server.xml 3.", "labels": []}, "4": {"text": "Start the service, and then stop the service.", "labels": ["SR"]}, "5": {"text": "4.", "labels": ["OB", "SR"]}, "6": {"text": "The following is printed in the catalina.2010-04-27.log:  27.04.2010 17:49:13 org.apache.catalina.startup.Catalina stopServer SEVERE: No shutdown port configured.", "labels": ["OB"]}, "7": {"text": "Shut down server through OS signal.", "labels": []}, "8": {"text": "Server not shut down.", "labels": ["OB"]}, "9": {"text": "It is just a message.", "labels": []}, "10": {"text": "Tomcat stops regardless of it: After printing the message Catalina#stopServer() performs System.exit(1) which results in Tomcat shutdown.", "labels": ["OB"]}, "11": {"text": "I think that when service launcher stops Tomcat, Catalina#server is not null.", "labels": ["OB"]}, "12": {"text": "That can be used to differentiate the two use cases.", "labels": []}, "13": {"text": "There could be improvements on how to stop Tomcat.", "labels": []}, "14": {"text": "E.g., to call Catalina.stop().", "labels": []}, "15": {"text": "If that is the case, it would be better to use wait(10000) instead of sleep(10000) in StandardServer.await(), so that it could be woken by a notifyAll() call, or use interrupt() call to wake it up (if we know the thread).", "labels": ["EB"]}, "16": {"text": "System.exit(0) would work regardless of all that.", "labels": []}, "17": {"text": "I suppose that jsvc may show the same behaviour, but I have not tried.", "labels": []}}}