{
  "id": "22360",
  "title": "Bug 22360[Fonts] FontRegistry instantiation issue with external resources",
  "description": "FontRegistry fails to instantiate using resources outside org.eclipse.jface.resource. Currently, resource lookup is restricted to the org.eclipse.jface.resource path. This issue could be resolved by modifying FontRegistry to accept a client class or class loader as an additional parameter in its constructor.",
  "OB": "When attempting to create a FontRegistry instance in my application using the following code snippet:\n\n```java\ncom.company.product.MyClass\npublic void createFontRegistry(){\n    FontRegistry fonts = new FontRegistry(\"com.company.product.fonts\");\n}\n```\nI encounter a MissingResourceException, despite having a 'fonts.properties' file in the 'com/company/product/' folder. However, when using the following code instead:\n\n```java\ncom.company.product.MyClass\npublic void createFontRegistry(){\n    ResourceBundle fonts = ResourceBundle.getBundle(\"com.company.product.fonts\");\n}\n```\nNo exception occurs. Furthermore, replicating the FontRegistry class entirely within my 'com.company.product' package resolves the issue. My assumption is that this discrepancy is a bug within the FontRegistry. It appears to attempt loading the 'fonts' resource bundle using its class loader, as seen in the 'readResourceBundle(String)' method within the FontRegistry class.",
  "EB": "A potential solution could involve modifying FontRegistry to allow clients to load their own resource bundle and pass it as a parameter to the constructor, instead of solely relying on the bundle name.",
  "SR": "1. Attempt to create a FontRegistry instance in an application using external resources, specifically by calling the FontRegistry constructor with appropriate resource details.\n2. Observe the occurrence of the MissingResourceException.\n3. Try accessing the same resources using ResourceBundle.getBundle() method instead of FontRegistry.\n4. Replicate the FontRegistry class within the client package and observe if it resolves the issue."
}
