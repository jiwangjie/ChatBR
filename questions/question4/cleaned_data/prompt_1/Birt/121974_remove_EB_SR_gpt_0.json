{"id": "121974", "title": "Can't evaluate global expressions when ResultIterator is not in the iteration loop", "description": "For global expressions, such as {params['p1']}, {new DateTime()}, it should always be available and evaluatable within the Birt scripting environment. Currently, the Dte scriptExpression has three types: BEFOREFIRSTROW, AFTERLASTROW, ONEACHROW. But in fact, BEFOREFIRSTROW only works when the cursor is just about to enter the first row, and AFTERLASTROW only works when the cursor is just about to leave the last row. Once the iteration is finished, both types won't work anymore. If you try to evaluate these expressions, a 'QueryResults or its iterator has been closed' DataException will be thrown. However, these global expressions are unrelated to the data row iteration. Also, the current names BEFOREFIRSTROW/AFTERLASTROW are misleading. It would be better to change them to ONSTARTROW, ONENDROW, or other names that are more clear. This bug currently blocks the chart from evaluating those non-data-row expressions (i.e. expressions from title URL actions) that are not within a data row iteration (chart needs to evaluate these expressions from actions after data binding).", "OB": "BEFOREFIRSTROW and AFTERLASTROW only work when the cursor is about to be positioned at the first and last rows of the result set, respectively. However, these expressions cannot be evaluated once the iteration is finished, resulting in a 'QueryResults or its iterator has been closed' DataException.", "EB": "The Birt scripting environment should make global expressions, such as {params['p1']}, {new DateTime()}, available and evaluatable at all times, regardless of the data row iteration. Additionally, the names of the scriptExpression types should be changed from BEFOREFIRSTROW and AFTERLASTROW to ONSTARTROW and ONENDROW, respectively, to avoid confusion.", "SR": "Ensure that global expressions can be evaluated even when the ResultIterator is not in the iteration loop. Rename the scriptExpression types BEFOREFIRSTROW and AFTERLASTROW to ONSTARTROW and ONENDROW, respectively, for clarity."}