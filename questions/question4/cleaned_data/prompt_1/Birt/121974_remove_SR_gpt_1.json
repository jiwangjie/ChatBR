{
  "id": "121974",
  "title": "Bug 121974: Unable to Evaluate Global Expressions Outside Iteration Loop",
  "description": "Bug 121974: Can't evaluate global expressions when ResultIterator is not in the iteration loop. For global expressions, such as {params[\"p1\"]},{new DateTime()}, it should always be available and evaluatable within the BIRT scripting environment. Currently, Dte scriptExpresson has three types: BEFOREFIRSTROW, AFTERLASTROW, ONEACHROW.",
  "OB": "Global expressions, like {params[\"p1\"]},{new DateTime()}, are expected to be available and evaluable within the BIRT scripting environment. However, BEFOREFIRSTROW only works when the cursor is just about to enter the first row, and AFTERLASTROW only works when the cursor is just about to leave the last row. After the iteration is finished, both types cease to work, resulting in a 'QueryResults or its iterator has been closed' DataException when trying to evaluate these expressions. Importantly, these global expressions are not inherently tied to data row iteration. Furthermore, the current naming of BEFOREFIRSTROW/AFTERLASTROW is misleading; a more appropriate naming convention, such as ONSTARTROW and ONENDROW, should be considered. This bug currently hinders the chart from evaluating non-data row expressions (e.g., expressions from title URL actions) that are not within a data row iteration, as charts need to evaluate these expressions from actions after data binding.",
  "EB": "Global expressions should return a correct result value whenever they are evaluated within the BIRT scripting environment. Introducing a new GLOBAL expression type is necessary to address this need.",
  "SR": "1. Ensure that global expressions, such as {params[\"p1\"]},{new DateTime()}, can be evaluated within the BIRT scripting environment regardless of the iteration state.\n2. Consider renaming BEFOREFIRSTROW/AFTERLASTROW to more accurately reflect their behavior, such as ONSTARTROW and ONENDROW.\n3. Implement a new GLOBAL expression type to facilitate the correct evaluation of global expressions within the BIRT scripting environment."
}
