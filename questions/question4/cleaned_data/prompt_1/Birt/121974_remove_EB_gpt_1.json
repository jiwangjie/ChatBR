{
  "id": "121974",
  "title": "Bug 121974: Can't evaluate global expressions when ResultIterator is not in the iteration loop",
  "description": "For global expressions, such as {params[\"p1\"]},{new DateTime()}, it should always be available and evaluable within the BIRT scripting environment. Currently, Dte scriptExpression has three types: BEFOREFIRSTROW, AFTERLASTROW, ONEACHROW.",
  "OB": "Global expressions like {params[\"p1\"]},{new DateTime()} are not evaluable within the BIRT scripting environment when ResultIterator is not in the iteration loop. BEFOREFIRSTROW only works when the cursor is about to enter the first row, and AFTERLASTROW only works when the cursor is about to leave the last row. Once the iteration is finished, both types won't work anymore, and a 'QueryResults or its iterator has been closed' DataException is thrown if you try to evaluate these expressions.",
  "EB": "Global expressions, including {params[\"p1\"]},{new DateTime()}, should be consistently available and evaluable throughout the BIRT scripting environment, regardless of the cursor position in the iteration loop. The current behavior of BEFOREFIRSTROW and AFTERLASTROW is misleading; consider renaming them to ONSTARTROW and ONENDROW for clarity. This bug currently impedes the chart from evaluating nondatarow expressions (e.g., expressions from title URL actions) that are not within a datarow iteration, as charts need to evaluate these expressions from actions after data binding.",
  "SR": "1. Open the BIRT scripting environment with global expressions like {params[\"p1\"]},{new DateTime()}.\n2. Attempt to evaluate these expressions when ResultIterator is not in the iteration loop.\n3. Observe the 'QueryResults or its iterator has been closed' DataException being thrown.\n4. Note that the global expressions should be evaluable throughout the scripting environment and should not be dependent on the data row iteration."
}
