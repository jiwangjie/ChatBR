{
  "id": "121974",
  "title": "Bug 121974: Can't evaluate global expressions when ResultIterator is not in the iteration loop",
  "description": "Bug 121974: Can't evaluate global expressions when ResultIterator is not in the iteration loop. For global expressions, such as {params['p1']}, {new DateTime()}, it should always be available and evaluable within the BIRT scripting environment. Currently, Dte scriptExpression has three types: BEFOREFIRSTROW, AFTERLASTROW, ONEACHROW.",
  "OB": "The issue arises when attempting to evaluate global expressions outside the data row iteration. BEFOREFIRSTROW only functions when the cursor is just entering the first row, and AFTERLASTROW only works when the cursor is just leaving the last row. Once the iteration is finished, both types cease to work, leading to a 'QueryResults or its iterator has been closed' DataException if these expressions are evaluated. However, these global expressions are not inherently tied to data row iteration. Additionally, the naming of BEFOREFIRSTROW/AFTERLASTROW is misleading; it would be clearer to rename them to ONSTARTROW and ONENDROW or other names that better reflect their functionality. This bug is currently blocking the chart from evaluating non-data row expressions (e.g., expressions from title URL actions) that are not within a data row iteration. (Charts need to evaluate these expressions from actions after data binding).",
  "EB": "The proposed solution is to decouple the evaluation of global expressions from the data row iteration. BEFOREFIRSTROW and AFTERLASTROW should be renamed to ONSTARTROW and ONENDROW, respectively, to accurately represent their functionality. This change will prevent the 'QueryResults or its iterator has been closed' DataException from being thrown when evaluating these expressions outside the data row iteration.",
  "SR": "To address this bug, modify the scriptExpression evaluation to ensure that global expressions can be evaluated independently of data row iteration. Rename BEFOREFIRSTROW to ONSTARTROW and AFTERLASTROW to ONENDROW for clarity. Verify that the chart can successfully evaluate non-data row expressions after data binding."
}
