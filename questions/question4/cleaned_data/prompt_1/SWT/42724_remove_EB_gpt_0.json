{"id": "42724", "title": "Bug 42724: StyledText selection rendered incorrectly on bidi platforms", "description": "Bug 42724: StyledText selection rendered incorrectly on bidi platforms. I don't believe we even need to redraw the entire selection background anymore because there is code in StyledTextRenderer.drawLine that creates a style range for the selection.", "OB": "The problem occurs when forcing a redraw of the entire client area on bidi platforms. In this case, the entire bidi segment is drawn with a selection background. However, the code in DisplayRenderer.drawLineSelectionBackground does not take bidi segments (direction runs) into account, resulting in an incorrect selection background. The proper selection background should be drawn in StyledTextRenderer.drawStyledLine, taking bidi segments and tab stops into account.", "EB": "Steps to reproduce:\n1. Use the attached BidiUtil class.\n2. Type one English character followed by three or more Arabic/Hebrew characters.\n3. Place the caret at the beginning of the line.\n4. Select the next two characters, including one bidi character.\nResult: The selection background includes unselected characters.", "SR": "Build 20030903. The attached BidiUtil exposes a bug in the selection rendering code in DisplayRenderer.drawLineSelectionBackground."}