{
  "id": "50059",
  "title": "Bug 50059 - Resources not served from /WEBINF/lib/{.jar}/METAINF/resources with metadatacomplete=\"true\"",
  "description": "Bug 50059 - Resources are not served from /WEBINF/lib/{.jar}/METAINF/resources if metadatacomplete=\"true\" is set in web.xml. Make a Servlet 3.0 web app (let's name it foo) with metadatacomplete=\"true\" attribute set on the web app element in the /WEBIBNF/web.xml.",
  "OB": "When starting the web app in Tomcat 7.0.2 and navigating to http://localhost:8080/foo/index.html in a browser, the expected result is a 200 response with index.html served. However, the actual result is a 404 error. If the web.xml is modified to set metadatacomplete=\"false\" and the app is restarted, /foo/index.html responds as expected. Testing the same web app with Glassfish v3.0.1 shows that it works as expected, regardless of the value set in the metadatacomplete attribute. A quick examination of the servlet 3.0 spec indicates that metadatacomplete only regulates annotation and web fragment processing. In the example, bar.jar has no connection to annotations and is not a web fragment, yet it is handled differently based on the metadatacomplete attribute.",
  "EB": "The expected behavior is that the jar (let's name it bar.jar) should be placed in /WEBINF/lib.",
  "SR": "To reproduce the issue:\n1. Create a Servlet 3.0 web app (foo) with metadatacomplete=\"true\" in the web.xml file.\n2. Place the jar file (bar.jar) in the /WEBINF/lib directory.\n3. Start the web app in Tomcat 7.0.2.\n4. In a browser, go to http://localhost:8080/foo/index.html and observe the 404 error.\n5. Modify the web.xml to set metadatacomplete=\"false\".\n6. Restart the app.\n7. Access http://localhost:8080/foo/index.html again and verify that it responds as expected with a 200 status."
}
