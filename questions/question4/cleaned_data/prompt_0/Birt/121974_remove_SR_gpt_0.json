{"id": "121974", "title": "Bug 121974: Can't evaluate global expressions when ResultIterator is not in the iteration loop", "description": "Bug 121974: Can't evaluate global expressions when ResultIterator is not in the iteration loop For global expressions, such as {params['p1']}, {new DateTime()}, it should always be available and evaluatable within the BIRT scripting environment. Currently, Dte scriptExpression has three types: BEFOREFIRSTROW, AFTERLASTROW, ONEACHROW.", "OB": "When the iteration is finished, expressions with the type BEFOREFIRSTROW and AFTERLASTROW cannot be evaluated anymore. Attempting to evaluate these expressions results in a 'QueryResults or its iterator has been closed' DataException. However, these global expressions are not tied to the data row iteration.", "EB": "Global expressions should be evaluatable even after the iteration is finished in the BIRT scripting environment. Introduce a new expression type, such as ONENDITERATION, to achieve this.", "SR": "To reproduce the issue:\n1. Create a BIRT report with global expressions that include parameters or date/time functions.\n2. Run the report and verify that the expressions are evaluated correctly within the data row iteration.\n3. Finish the iteration and attempt to evaluate the same expressions again. Note that they can no longer be evaluated and a 'QueryResults or its iterator has been closed' DataException is thrown."}