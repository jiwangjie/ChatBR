{"id": "42724", "title": "Bug 42724 - StyledText selection rendered incorrectly on bidi platforms", "description": "Bug 42724 - StyledText selection rendered incorrectly on bidi platforms. I don't believe we even need to redraw the entire selection background anymore because there is code in StyledTextRenderer.drawLine that creates a style range for the selection.", "OB": "On bidi platforms, when forcing a redraw of the entire client area, the entire bidi segment is drawn with a selection background. The problem is that DisplayRenderer.drawLineSelectionBackground includes code to redraw the entire selection background, and that code does not take bidi segments into account (direction runs). The proper selection background is therefore drawn in StyledTextRenderer.drawStyledLine, taking bidi segments and tab stops into account.", "EB": "The selection background should only be redrawn in StyledTextRenderer.drawStyledLine, taking into account bidi segments and tab stops, instead of in DisplayRenderer.drawLineSelectionBackground.", "SR": "To reproduce the issue: \n1. Use a bidi platform.\n2. Force a redraw of the entire client area.\n3. Observe that the entire bidi segment is drawn with a selection background that does not take bidi segments into account. \nTo fix the issue: \n1. Modify the code in StyledTextRenderer.drawStyledLine to include the proper selection background drawing for bidi segments and tab stops. \n2. Remove the code in DisplayRenderer.drawLineSelectionBackground that redraws the selection background for the entire client area."}