{"id": "42724", "title": "Bug 42724: StyledText selection rendered incorrectly on bidi platforms", "description": "Bug 42724: StyledText selection rendered incorrectly on bidi platforms. I don't believe we even need to redraw the entire selection background anymore because there is code in StyledTextRenderer.drawLine that creates a style range for the selection.", "OB": "When forcing a redraw of the entire client area, the entire bidi segment is drawn with a selection background. The problem is that DisplayRenderer.drawLineSelectionBackground includes code to redraw the entire selection background, and that code does not take bidi segments into account (direction runs). The proper selection background is therefore drawn in StyledTextRenderer.drawStyledLine, taking bidi segments and tab stops into account.", "EB": "The selection background should only be drawn for the selected characters in the bidi segment on bidi platforms.", "SR": "Build 20030903. The attached BidiUtil exposes a bug in the selection rendering code in DisplayRenderer.drawLineSelectionBackground.\n\nSteps to reproduce:\n1. Use the attached BidiUtil to type one English character followed by three or more Arabic/Hebrew characters.\n2. Place the caret at the beginning of the line.\n3. Select the next two characters, to include one bidi character.\n\nThe selection background includes unselected characters."}