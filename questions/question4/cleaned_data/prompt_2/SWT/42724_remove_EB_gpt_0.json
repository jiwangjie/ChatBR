{"id": "42724", "title": "Bug 42724: StyledText selection rendered incorrectly on bidi platforms", "description": "Bug 42724: StyledText selection is being rendered incorrectly on bidi platforms. Currently, when forcing a redraw of the entire client area, the entire bidi segment is drawn with a selection background. However, it is not necessary to redraw the entire selection background anymore as there already exists code in StyledTextRenderer.drawLine that creates a style range for the selection. The problem lies in DisplayRenderer.drawLineSelectionBackground, where the code to redraw the entire selection background does not take bidi segments (direction runs) into account. Therefore, the proper selection background should be drawn in StyledTextRenderer.drawStyledLine, taking bidi segments and tab stops into account.", "OB": "When forcing a redraw of the entire client area, the entire bidi segment is currently drawn with a selection background in DisplayRenderer.drawLineSelectionBackground. However, this code does not consider bidi segments (direction runs). The proper selection background should instead be drawn in StyledTextRenderer.drawStyledLine, taking bidi segments and tab stops into account.", "EB": "", "SR": "Bug is reproducible with the provided types and steps on build 20030903. The attached BidiUtil exposes a bug in the selection rendering code in DisplayRenderer.drawLineSelectionBackground. To reproduce the bug, follow these steps: 1. Use the attached BidiUtil and type one English character followed by three or more Arabic/Hebrew characters. 2. Place the caret at the beginning of the line. 3. Select the next two characters, including one bidi character. The selection background will include unselected characters."}