{
  "id": "22360",
  "title": "Bug 22360[Fonts] FontRegistry instantiation issue with external resources",
  "description": "Bug 22360[Fonts] FontRegistry cannot be instantiated using resources outside org.eclipse.jface.resource. Therefore, all the resources that are being looked up are the only ones relative to the location of the FontRegistry class in org.eclipse.jface.resource path. It can be remedied if FontRegistry took a client class (or class loader) as an additional parameter to the constructor.",
  "OB": "I encounter a MissingResourceException when attempting to create a FontRegistry instance for my application. The code snippet triggering the issue is as follows:\n\n```java\nclass com.company.product.MyClass {\n  public void createFontRegistry() {\n    FontRegistry fonts = new FontRegistry(\"com.company.product.fonts\");\n  }\n}```\n\nI have a file named fonts.properties in the com/company/product/ folder. However, if I use the following code snippet instead:\n\n```java\nclass com.company.product.MyClass {\n  public void createFontRegistry() {\n    ResourceBundle fonts = ResourceBundle.getBundle(\"com.company.product.fonts\");\n  }\n}```\n\nNo exception is thrown. Additionally, if I create a complete copy of the FontRegistry class in my com.company.product package, then it works. My assumption is that it is a bug in the FontRegistry. It attempts to load the fonts resource bundle, but the FontRegistry's class loader is used to do that (see readResourceBundle(String) FontRegistry method).",
  "EB": "Alternatively, FontRegistry can allow clients to load their own resource bundle and take it as a parameter to the constructor (vs. the name of the bundle).",
  "SR": "1. Attempt to create a FontRegistry instance in a class outside the org.eclipse.jface.resource path.\n2. Ensure that the class has a corresponding fonts.properties file in the specified location (com/company/product/).\n3. Observe the occurrence of MissingResourceException.\n\nAlternatively:\n\n1. Attempt to create a FontRegistry instance using ResourceBundle.getBundle(\"com.company.product.fonts\").\n2. Verify that no exception is thrown.\n\nAdditionally:\n\n1. Create a complete copy of the FontRegistry class in the com.company.product package.\n2. Verify that the FontRegistry instance can be created without issues."
}
