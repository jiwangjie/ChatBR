{"id": "49503", "title": "Bug 49503 - Connectors do not bind to their ports in Catalina.load(), but only later in start()", "description": "The connectors in Tomcat do not bind to their ports in the Catalina.load() method, but only later in the start() method. This issue was tested in trunk at revision 957942, indicating that it affects version 7.0.0 as well. In Tomcat 6, there is a separate prestartup phase to allow connectors to bind to their ports before other parts of Tomcat are started. This is achieved through separate Bootstrap.load(String[]) and Bootstart.start() methods [1]. This bug breaks the fix for BZ 48625.\n\nTo reproduce:\n1. Start the first instance successfully.", "OB": "When running with jsvc, Tomcat is unable to bind to privileged ports (e.g. port 80). This issue is observed when testing the fix for bug 49030 + bug 48625 that was applied in revision 957960. The second instance fails in an unexpected way.\n3. Actual behavior:\nThe connector does not attempt to bind to the port, causing an exception to not occur. The connector binds to the port only when the start() method is called. The startup sequence continues and eventually fails in Server.await().", "EB": "Expected behavior:\nIn the StandardService.initInternal() method, the connector.init() call should fail because it cannot bind to the port. The exception from the connector.init() call is caught there and, if the EXITONINITFAILURE flag is set, it should be rethrown. The rethrown exception should then be caught in Catalina.load() and rethrown as an Error to abort the Tomcat startup.\n4.", "SR": "1. Start the first instance successfully."}