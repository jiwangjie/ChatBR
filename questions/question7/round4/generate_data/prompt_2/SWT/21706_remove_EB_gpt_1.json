{"id": "21706", "title": "BidiUtil in win32 has Class.forName() usage", "description": "Bug 21706BidiUtil in win32 has Class.forName() usage", "OB": "The issue is related to the usage of `Class.forName()` in the `BidiUtil` class in the win32 version of the software. Currently, there is a line in `org.eclipse.swt.internal.BidiUtil` that contains the following code: `static Callback callback = new Callback (BidiUtil.class, \"windowProc\", 4);`. The `BidiUtil.class` is a shorthand syntax for `Class.forName(\"org...BidiUtil\")`. However, this method throws a `NoClassDefFoundError`, which is not defined in the CLDC class libraries. This presents a problem in the CLDC version of SWT. It is important to note that you would only encounter this issue if you verified or used jxeLink or a similar tool. The compiler generates the call automatically and assumes that `NoClassDefFoundError` is available, so you will not receive a compiler error from the Eclipse compiler or Sun's compiler.", "EB": "The line above should be changed to: `static Callback callback = new Callback (new BidiUtil().getClass(), \"windowProc\", 4);`. Although it has not been tested, this change is expected to provide the same functionality.", "SR": "To reproduce the issue: \n1. Open the `org.eclipse.swt.internal.BidiUtil` class in the win32 version of the software. \n2. Locate the line: `static Callback callback = new Callback (BidiUtil.class, \"windowProc\", 4);`. \n3. Change the line to: `static Callback callback = new Callback (new BidiUtil().getClass(), \"windowProc\", 4);`. \n4. Save the file and rebuild the software. \n5. Verify that the software now functions as expected without throwing a `NoClassDefFoundError` in the CLDC version of SWT."}