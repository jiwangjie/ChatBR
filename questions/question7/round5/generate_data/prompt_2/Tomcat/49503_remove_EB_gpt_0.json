{"id": "49503", "title": "Bug 49503: Connectors do not bind to their ports in Catalina.load(), but only later in Catalina.start()", "description": "Connectors do not bind to their ports in Catalina.load(), but only later in Catalina.start(). Testing with trunk at revision 957942, thus this issue supposedly affects 7.0.0 as well. In TC6 there is a separate prestartup phase when starting Tomcat, allowing Connectors to bind to their ports before other parts of Tomcat are started. IIRC, this is implemented by having separate methods Bootstrap.load(String[]) and Bootstrap.start() [1]. However, this implementation breaks the fix for Bug 48625. \n\nTo reproduce: \n1. Start the first instance of Tomcat successfully.\n2. Start a second instance of Tomcat with the same configuration.\n3. Actual behavior: The second instance fails in Server.await() because the connector does not bind to the port during start() as expected.\n\n[1] http://commons.apache.org/daemon/jsvc.html\nDowngrading user: When running with jsvc, Tomcat is unable to bind to privileged ports (e.g., port 80). Although I do not use jsvc, I observe this issue when testing the fix for Bug 49030 + Bug 48625 that I applied in r957960.", "OB": "The second instance of Tomcat fails in Server.await() because the connector does not bind to the port during start().", "EB": "The second instance of Tomcat should bind to its port successfully during start(), without causing a failure in Server.await().", "SR": "To reproduce:\n1. Add the following line to conf/catalina.properties: org.apache.catalina.startup.EXITONINITFAILURE=true.\n2. Start two Tomcat instances with the same configuration at the same time."}